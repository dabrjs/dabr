const t=t=>!!t&&t.constructor&&"Array"==t.constructor.name,e=e=>0==e&&!t(e)||!!e,n=t=>!!t&&"function"==typeof t,r=(t,e)=>Object.entries(t).map(e),o=(t,n)=>((t,n)=>(t=>{let e={};return t.forEach(([t,n])=>{e[t]=n}),e})(Object.entries(t).map(([t,e])=>{let r=n(e,t);return r?[t,r]:null}).filter(e)))(n,t),s=(...t)=>Object.assign({},...t),i=(t,e)=>{let n=[],r=[];return function t(e,o){var s;if(null==e&&null==o)return!0;if(null==e&&null==o)return!0;if(isNaN(e)&&isNaN(o)&&"number"==typeof e&&"number"==typeof o)return!0;if(e===o)return!0;if("function"==typeof e&&"function"==typeof o||e instanceof Date&&o instanceof Date||e instanceof RegExp&&o instanceof RegExp||e instanceof String&&o instanceof String||e instanceof Number&&o instanceof Number)return e.toString()===o.toString();if(!(e instanceof Object&&o instanceof Object))return!1;if(e.isPrototypeOf(o)||o.isPrototypeOf(e))return!1;if(e.constructor!==o.constructor)return!1;if(e.prototype!==o.prototype)return!1;if(n.indexOf(e)>-1||r.indexOf(o)>-1)return!1;for(s in o){if(o.hasOwnProperty(s)!==e.hasOwnProperty(s))return!1;if(typeof o[s]!=typeof e[s])return!1}for(s in e){if(o.hasOwnProperty(s)!==e.hasOwnProperty(s))return!1;if(typeof o[s]!=typeof e[s])return!1;switch(typeof e[s]){case"object":case"function":if(n.push(e),r.push(o),!t(e[s],o[s]))return!1;n.pop(),r.pop();break;default:if(e[s]!==o[s])return!1}}return!0}(t,e)},a=e=>t(e)?e:[e],c=(t,e)=>{return n=e,r=(t,e)=>t+e,t.map((t,e)=>r(t,n[e]));var n,r},l=t=>e=>t.reduce((t,e)=>e(t),e),u=(t=null,e=new WeakMap)=>d({val:t,old:null,trans:new Set,changed:!1,isNode:!0,info:e}),d=t=>new Proxy(t,{set:f,get:h}),h=(t,e)=>"target"==e?t:t[e],f=(t,e,n)=>"val"==e&&(t.changed||i(t.val,n)||(t.old=t.val,t.val=n,t.changed=!0,t.trans.forEach(e=>{e.func()&&t.trans.delete(e)}),t.changed=!1),!0),p=t=>t.map(t=>e(t.val)).reduce((t,e)=>t&&e,!0),v=(...e)=>{const r=e.length,o=e[r-1];let s,i;n(o)?(s=o,i=null):(s=e[r-2],i=o);const a=e.splice(0,r-1).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e));if(a.length>0){const t=s.length,e=[];for(let n=0;n<t;n++)e.push(a[n]);const n=u(),r=()=>{p(a)&&(n.val=s(...e.map(t=>t.val)))},o={nodes:a,func:r,ref:i};return a.forEach(t=>{const e=t.target.trans;if(!e.has(o))if(i){const t=[...e].find(t=>t.ref==i);t?(_(t),e.add(o)):e.add(o)}else e.has(o)||e.add(o)}),p(a)&&r(),{node:n,transition:o}}return null},m=(...t)=>{const{node:e}=v(...t);return e},b=(...e)=>{const r=e.length,o=e[r-1];let s,i;n(o)?(s=o,i=null):(s=e[r-2],i=o);const a=e.splice(0,r-1).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e));if(a.length>0){const t=s.length,e=[];for(let n=0;n<t;n++)e.push(a[n]);const n=u(),r=()=>{n.val=s(...e.map(t=>t.val))},o={nodes:a,func:r,ref:i};return a.forEach(t=>{const e=t.target.trans;if(!e.has(o))if(i){const t=[...e].find(t=>t.ref==i);t?(_(t),e.add(o)):e.add(o)}else e.has(o)||e.add(o)}),r(),{node:n,transition:o}}return null},y=(...t)=>{const{node:e}=b(...t);return e},_=t=>{t.nodes.forEach(e=>{e.target.trans.delete(t)})},g=t=>t.isNode?t:u(t),w=(t,e)=>mapN([t],t=>t[e]),E=(t,e)=>{const n=m(t,t=>t[e]);return m(n,()=>{const r=t.val;r[e]=n.val,t.val=r}),n},O=(e,n)=>{let r;return r=n?n.isNode?t(n.val)?n:m(n,a):n.isEntry?n:g(a(n)):u([]),{isTree:!0,val:e,children:r}},A=O,x=(t,e,n=[])=>O(e(t.val,t,n),t.children.isEntry?t.children:m(t.children,t=>t.map((t,r)=>x(t,e,n.concat(r))))),M=(t,e=[])=>e=>x(e,t,[]),z={isEntry:!0},T=(t,e)=>(t.children.isEntry?t.children=e:t.children=m(t.children,t=>t.map(t=>T(t,e))),t),k=(t,e)=>{let n;return n=t.children==e?z:m(t.children,t=>t.map(t=>k(t,e))),O(t.val,n)},S=(e,n,r=null,o=[])=>{const s=n(e,r,o),i=t(s),a=i?s[0]:s,c=i?s[1]:r,l=a?k(a,e.children):null,u=m(e.children,t=>t.map((t,e)=>S(t,n,c,o.concat(e))));return a?T(l,u):null},L=(t,e=null,n=[])=>r=>S(r,t,e,n),j=(t,e)=>{let n=null;return S(t,(t,r,o)=>{i(o,e)&&(n=t)}),n},R=t=>e=>j(e,t),B=t=>x(t,t=>O(t,z)),C=t=>{const e=t.val;return e.isTree?C(T(e,t.children)):(t.children=m(t.children,t=>t.map(C)),t)},N={color:({elem:t,node:e})=>()=>{t.style["background-color"]=e.val},show:({elem:t,node:e})=>()=>{e.val?t.style.display="block":t.style.display="none"}};var W=t=>x(t,t=>(t.style&&r(t.style,([e,n])=>{const r=g(n),o=N[e];if(o){const e=o({node:r,elem:t.inst.dom,rect:t});t.tran([r],e)}}),t));const D={click:({elem:t,channel:e})=>{t.addEventListener("click",t=>{e.put=t})},mouseOver:({elem:t,channel:e})=>{t.addEventListener("mouseover",t=>{e.put=t})},mouseEnter:({elem:t,channel:e})=>{t.addEventListener("mouseenter",t=>{e.put=t})},mouseMove:({elem:t,channel:e})=>{t.addEventListener("mousemove",t=>{e.put=t})},drag:({elem:t,channel:e})=>{let n=!1;t.addEventListener("mousedown",t=>{console.log("aAAAAAA"),n=!0,e.put=t}),t.addEventListener("mouseup",()=>{console.log("BBBBBBBBB"),n=!1,e.put=!1}),t.addEventListener("mousemove",t=>{n&&(e.put=t)})},mouseOut:({elem:t,channel:e})=>{t.addEventListener("mouseout",t=>{e.put=t})}};var P=t=>x(t,t=>(t.events&&r(t.events,([e,n])=>{if(n.isChan){const r=D[e];r&&r({channel:n,elem:t.inst.dom,rect:t})}}),t));const V=(t,e)=>$({get:t,ports:new Set,isChan:!0,info:e}),$=t=>new Proxy(t,{get:H,set:q}),H=(t,e)=>"target"==e?t:t[e],q=(t,e,n)=>"put"==e&&(t.get=n,t.ports.forEach(t=>{t.func()}),!0),G=(t,e)=>{const n={chans:t,func:e};return t.forEach(t=>{t.ports.add(n)}),n},F=(t,e,n)=>{const r={chans:e,func:n,ref:t};return e.forEach(e=>{const n=e.ports,o=[...n].find(e=>e.ref==t);o?(I(o),n.add(r)):n.add(r)}),r},I=t=>{t.chans.forEach(e=>{e.target.ports.delete(t)})},J=(t,e)=>{const n=G(t,()=>{e(),I(n)});return n},K=(t,n)=>{const r=V();return G(t,()=>{const t=n();e(t)&&(r.put=t)}),r},Q=(t,e)=>K(t,()=>e(...t.map(t=>t.get))),U=(t,e)=>Q([t],t=>e(t)?t:null),X=t=>{const e={pos:u(),siz:u(),posAbs:u(),sizAbs:u(),scale:u([1,1])},n={isRect:!0,isSupp:!1,isCore:!0,oldVersions:[],init:V(),stop:V(),created:u(),removed:u(),inst:null,renderTrans:new Set,domEvents:[],data:new WeakMap([[X,{}]]),layout:e,tran:Y},r={};if(t.data)if((i=t.data).constructor&&"WeakMap"==i.constructor.name)r.data=t.data;else{const e=a(t.data);r.data=new WeakMap(e.map(({key:t,val:e})=>[t,[e]]))}var i;t.layout&&(r.layout=s(e,t.layout));const c=s(n,t,r);return c.layout&&(c.layout=o(g,c.layout)),c},Y=function(...t){const{transition:e,node:n}=v(...t);return this.renderTrans.add(e),n},Z=t=>{const e=X(t);return e.isSupp=!0,e.isCore=!1,e},tt=(t,e)=>{const n={};if(r(e,([e,r])=>{var o;t[e]&&((o=t[e])&&"object"==typeof o&&o.constructor&&"Array"!=o.constructor.name)?n[e]=s(t[e],r):n[e]=r}),e.data){const r=a(e.data);n.data=t.data,r.forEach(({key:t,val:e})=>{if(n.data.has(t)){const e=n.data.get(t);n.data.set(e.concat(t))}else n.data.set(t,[e])})}return n.inst=null,n.init=V(),n.created=u(),n.oldVersions=t.oldVersions.concat([t]),X(s(t,n))},et=(t,e)=>({key:t,val:e}),nt=t=>tt(Z({layout:{pos:[0,0],siz:[100,100]}}),t||{}),rt=t=>{const e=t.inst.dom;t.domEvents.forEach(({name:t,func:n})=>{e["on"+t]=null})},ot=(t,e,n)=>{t.inst.dom["on"+e]=n,t.domEvents.push({name:e,func:n})},st=(t,e)=>({rel:t,px:e}),it=t=>st(0,t),at=(t,n)=>{const r=e(t.rel)?t:{px:0,rel:t},o=e(n.rel)?n:{px:0,rel:n};return st(r.rel+o.rel,r.px+o.px)},ct=(t,n)=>{const r=e(n.rel)?n:{px:0,rel:n};return st(r.rel*t,r.px*t)},lt=(t,e)=>[at(t[0],e[0]),at(t[1],e[1])],ut=(t,e)=>[ct(t,e[0]),ct(t,e[1])],dt=t=>e(t.px)?t.px:0,ht=t=>e(t.rel)?t.rel:t,ft=([t,e])=>[[ht(t),ht(e)],[dt(t),dt(e)]],pt=([t,e])=>[it(t),it(e)],vt=([t,e])=>[mt(t),mt(e)],mt=t=>{return t.rel?(e=t,Object.assign({},e)):t;var e},bt={},yt={fullSize:({elem:t,rect:e,tree:n,node:r})=>{e.tran([n.children],()=>{const t=n.children.val.map(t=>{const e=t.val.layout;return m([e.posAbs,e.sizAbs],()=>[c(e.posAbs.val,e.sizAbs.val),lt(e.pos.val,e.siz.val)])});m(t,()=>{r.val=vt(t.map(t=>t.val).reduce((t,e)=>{const[n,r]=t,[o,s]=e,[i,a]=n,[c,l]=r,[u,d]=o,[h,f]=s;return[i>u?[i,c]:[u,h],a>d?[a,l]:[d,f]]})[1])})})},fullSizeCor:({elem:t,rect:e,tree:n,node:r})=>{const o=u(),s=(yt.fullSize({elem:t,rect:e,tree:n,node:o}),e.layout.sizAbs),i=e.layout.scale,a=e.inst.par.layout.sizAbs;e.tran([o,s,a,i],()=>{const[[t,e],[n,c]]=ft(o.val),[l,u]=s.val,[d,h]=a.val;r.val=[st(t*l/d*i.val[0],n),st(e*u/h*i.val[1],c)]})},scrollAbs:({elem:t,rect:e,node:n})=>{ot(e,"scroll",()=>{n.val=[t.scrollLeft,t.scrollTop]}),e.tran([n],()=>{const[e,r]=n.val;t.scrollLeft=e,t.scrollTop=r})},scroll:({elem:t,rect:e,node:n})=>{const r=e.tran([e.layout.sizAbs],e=>{const n=t.scrollWidth,r=t.scrollHeight,o=Math.round(e[0]),s=Math.round(e[1]);return[n-o>=0?n-o:0,r-s>=0?r-s:0]});ot(e,"scroll",()=>{const e=r.val;n.val=[0===e[0]?0:t.scrollLeft/e[0]*100,0===e[1]?0:t.scrollTop/e[1]*100]}),e.tran([n],()=>{const[e,o]=n.val,s=r.val,i=[Math.round(e/100*s[0]),Math.round(o/100*s[1])];t.scrollLeft!=i[0]&&(t.scrollLeft=i[0]),t.scrollTop!=i[1]&&(t.scrollTop=i[1])},bt)}};var _t=t=>x(t,(t,e)=>(t.nodes&&r(t.nodes,([n,r])=>{const o="fullSize"==n?r:g(r),s=yt[n];s&&s({node:o,elem:t.inst.dom,rect:t,tree:e})}),t));const gt=(t,e)=>O(X(t),e),wt=(t,e)=>O(Z(t),e),Et=t=>e=>x(n=>t(n)?e(n):n),Ot=(t,e)=>(n,r)=>x(o=>t(o)?n(o):e(o)?r(o):o),At=Et(t=>t.isCore),xt=Et(t=>t.isSupp),Mt=Et(t=>t.isTree),zt=t=>e=>O(t(e.val),e.children),Tt=(t,e,n,r)=>{const o=r.scale,s=t.pos;n.tran([s,o],()=>{const[t,n]=ft(s.val),r=o.val;e.style.left=`calc(${t[0]*r[0]}% + ${n[0]}px)`,e.style.top=`calc(${t[1]*r[1]}% + ${n[1]}px)`});const i=t.siz;n.tran([i,o],()=>{const[t,n]=ft(i.val),r=o.val;e.style.width=`calc(${t[0]*r[0]}% + ${n[0]}px)`,e.style.height=`calc(${t[1]*r[1]}% + ${n[1]}px)`})},kt=(t,e,n,r,o,s,i,a)=>m([e,n,r,o,s],(t,e,n,r,o)=>{const[s,l]=ft(t),[u,d]=ft(e);let h=[o[0]*n[0]/100,o[1]*n[1]/100],f=[u[0]*h[0],u[1]*h[1]],p=[s[0]*h[0]+r[0],s[1]*h[1]+r[1]];i.val=c(p,l),a.val=c(f,d)});var St=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];t.call(e,o[1],o[0])}},e}()}(),Lt="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,jt="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Rt="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(jt):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var Bt=["top","right","bottom","left","width","height","size","weight"],Ct="undefined"!=typeof MutationObserver,Nt=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,o=0;function s(){n&&(n=!1,t()),r&&a()}function i(){Rt(s)}function a(){var t=Date.now();if(n){if(t-o<2)return;r=!0}else n=!0,r=!1,setTimeout(i,e);o=t}return a}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){Lt&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Ct?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){Lt&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;Bt.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Wt=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},Dt=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||jt},Pt=Ft(0,0,0,0);function Vt(t){return parseFloat(t)||0}function $t(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+Vt(t["border-"+n+"-width"])}),0)}function Ht(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Pt;var r=Dt(t).getComputedStyle(t),o=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],s=t["padding-"+o];e[o]=Vt(s)}return e}(r),s=o.left+o.right,i=o.top+o.bottom,a=Vt(r.width),c=Vt(r.height);if("border-box"===r.boxSizing&&(Math.round(a+s)!==e&&(a-=$t(r,"left","right")+s),Math.round(c+i)!==n&&(c-=$t(r,"top","bottom")+i)),!function(t){return t===Dt(t).document.documentElement}(t)){var l=Math.round(a+s)-e,u=Math.round(c+i)-n;1!==Math.abs(l)&&(a-=l),1!==Math.abs(u)&&(c-=u)}return Ft(o.left,o.top,a,c)}var qt="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof Dt(t).SVGGraphicsElement}:function(t){return t instanceof Dt(t).SVGElement&&"function"==typeof t.getBBox};function Gt(t){return Lt?qt(t)?function(t){var e=t.getBBox();return Ft(0,0,e.width,e.height)}(t):Ht(t):Pt}function Ft(t,e,n,r){return{x:t,y:e,width:n,height:r}}var It=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ft(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=Gt(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),Jt=function(t,e){var n,r,o,s,i,a,c,l=(r=(n=e).x,o=n.y,s=n.width,i=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(a.prototype),Wt(c,{x:r,y:o,width:s,height:i,top:o,right:r+s,bottom:i+o,left:r}),c);Wt(this,{target:t,contentRect:l})},Kt=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new St,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Dt(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new It(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Dt(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new Jt(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Qt="undefined"!=typeof WeakMap?new WeakMap:new St,Ut=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Nt.getInstance(),r=new Kt(e,n,this);Qt.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){Ut.prototype[t]=function(){var e;return(e=Qt.get(this))[t].apply(e,arguments)}}));var Xt=void 0!==jt.ResizeObserver?jt.ResizeObserver:Ut;const Yt=t=>W(P(_t(ee(t)))),Zt=(t,e)=>W(P(_t(ne(t,e)))),te=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],ee=t=>{const e=u(te()),n={layout:{posAbs:u([0,0]),sizAbs:e,scale:u([1,1])},flex:!1,inst:{dom:document.body}};return window.j=e,window.onresize=()=>{e.val=te()},re(C(t),n)},ne=(t,e)=>{const n=u([e.offsetWidth,e.offsetHeight]),r={layout:{posAbs:u([0,0]),sizAbs:n,scale:u([1,1])},flex:!1,inst:{dom:e}};return ae(e),new Xt(t=>{const e=t[0],{width:r,height:o}=e.contentRect;n.val=[r,o]}).observe(e),re(C(t),r)},re=(t,e)=>{const n=t.val;ie();const r=document.createElement("div");ae(r),e.inst.dom.appendChild(r),n.inst={dom:r,par:e};const o=n.layout;return Tt(o,r,n,e.layout),kt(0,o.pos,o.siz,e.layout.scale,e.layout.posAbs,e.layout.sizAbs,o.posAbs,o.sizAbs),n.oldVersions.forEach(t=>{t.inst=n.inst,t.init.put=!0,t.created.val=!0}),n.init.put=!0,n.created.val=!0,oe(t.children,n),t},oe=(t,e)=>{e.tran(t,()=>{let n=t.val,r=t.old;r||(r=[]),n||(n=[]);const o=r.filter(t=>!n.includes(t));n.filter(t=>!r.includes(t)).forEach(t=>re(t,e)),o.forEach(t=>se(t))})},se=t=>{const e=t.val,n=e.inst.dom;return n.parentNode.removeChild(n),e.renderTrans.forEach(t=>{_(t)}),rt(e),e.inst=null,e.stop.put=!0,e.removed.val=!0,e.created.val=!1,t.children.val=t.children.val.map(se),t},ie=()=>{if(!document.getElementById("dabr-style")){const t=".dabr::-webkit-scrollbar {width: 0 !important;height: 0 !important;}.dabr {overflow: -moz-scrollbars-none;scrollbar-width: none;-ms-overflow-style: none;}",e=document.createElement("style");e.setAttribute("id","dabr-style"),e.textContent=t,document.head.append(e)}},ae=t=>{t.className="dabr",t.style.position="absolute",t.style["overflow-y"]="scroll",t.style["overflow-x"]="scroll"};export{nt as Dummy,z as Entry,X as Rect,gt as RectT,Z as Supp,wt as SuppT,A as T,O as Tree,M as _mapT,R as _pathT,L as _walkT,P as addChans,lt as addCoord,ot as addEvent,Tt as addLayoutTriggers,at as addLen,_t as addNodes,W as addStyle,l as applyF,pt as asPx,V as chan,K as chanL,Et as cond,Ot as condElse,vt as copyCoord,mt as copyLen,At as core,kt as defaultLayoutReactivity,U as filterC,C as fromStruc,dt as getPx,ht as getRel,et as keyed,st as len,G as listen,J as listenOnce,F as listenRef,Q as mapC,x as mapT,ut as mulCoord,ct as mulLen,u as node,j as pathT,tt as preserveR,it as px,rt as removeEvents,I as removeListen,se as removeRect,_ as removeTran,Yt as run,Zt as runDOM,ee as runRect,ne as runRectDOM,ft as splitCoord,w as subNode,E as subNode2,xt as supp,g as toNode,B as toStruc,zt as top,m as tran,v as tranRef,Mt as tree,y as unsafeTran,b as unsafeTranRef,S as walkT};
