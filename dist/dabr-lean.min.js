const t=t=>!!t&&t.constructor&&"Array"==t.constructor.name,e=e=>0==e&&!t(e)||!!e,n=t=>!!t&&"function"==typeof t,o=(t,e)=>Object.entries(t).map(e),r=(t,n)=>((t,n)=>(t=>{let e={};return t.forEach(([t,n])=>{e[t]=n}),e})(Object.entries(t).map(([t,e])=>{let o=n(e,t);return o?[t,o]:null}).filter(e)))(n,t),s=(...t)=>Object.assign({},...t),i=t=>Object.assign({},t),a=(t,e)=>{let n=[],o=[];return function t(e,r){var s;if(null==e&&null==r)return!0;if(null==e&&null==r)return!0;if(isNaN(e)&&isNaN(r)&&"number"==typeof e&&"number"==typeof r)return!0;if(e===r)return!0;if("function"==typeof e&&"function"==typeof r||e instanceof Date&&r instanceof Date||e instanceof RegExp&&r instanceof RegExp||e instanceof String&&r instanceof String||e instanceof Number&&r instanceof Number)return e.toString()===r.toString();if(!(e instanceof Object&&r instanceof Object))return!1;if(e.isPrototypeOf(r)||r.isPrototypeOf(e))return!1;if(e.constructor!==r.constructor)return!1;if(e.prototype!==r.prototype)return!1;if(n.indexOf(e)>-1||o.indexOf(r)>-1)return!1;for(s in r){if(r.hasOwnProperty(s)!==e.hasOwnProperty(s))return!1;if(typeof r[s]!=typeof e[s])return!1}for(s in e){if(r.hasOwnProperty(s)!==e.hasOwnProperty(s))return!1;if(typeof r[s]!=typeof e[s])return!1;switch(typeof e[s]){case"object":case"function":if(n.push(e),o.push(r),!t(e[s],r[s]))return!1;n.pop(),o.pop();break;default:if(e[s]!==r[s])return!1}}return!0}(t,e)},c=e=>t(e)?e:[e],l=(t,e)=>{return n=e,o=(t,e)=>t+e,t.map((t,e)=>o(t,n[e]));var n,o},u=t=>e=>t.reduce((t,e)=>e(t),e),d=(t=null,e=new WeakMap)=>h({val:t,old:null,trans:new Set,changed:!1,isNode:!0,info:e,change:m,inTransaction:!1,delayedTransitions:null,delayedChanges:null}),h=t=>new Proxy(t,{set:p,get:f}),f=(t,e)=>"target"==e?t:t[e],p=(t,e,n)=>{if("val"==e){if(!t.changed&&!a(t.val,n))if(t.inTransaction){const e=t.delayedTransitions;t.delayedChanges.add({target:t,value:n}),t.trans.forEach(t=>{e.add(t)})}else t.old=t.val,t.val=n,t.changed=!0,t.trans.forEach(t=>{t.func()}),t.changed=!1;return!0}return!1},v=t=>t.map(t=>e(t.val)).reduce((t,e)=>t&&e,!0),m=function(t){this.val=t(this.val)},y=(...e)=>{const o=e.length,r=e[o-1];let s,i,a;n(r)?(s=r,i=null,a=1):(s=e[o-2],i=r,a=2);const c=e.splice(0,o-a).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e));if(c.length>0){const t=s.length,e=[];for(let n=0;n<t;n++)e.push(c[n]);const n=d(),o=()=>{v(c)&&(n.val=s(...e.map(t=>t.val)))},r={nodes:c,func:o,ref:i};return c.forEach(t=>{const e=t.target.trans;if(!e.has(r))if(i){const t=[...e].find(t=>t.ref==i);t?(_(t),e.add(r)):e.add(r)}else e.has(r)||e.add(r)}),v(c)&&o(),{node:n,transition:r}}return null},b=(...t)=>{const{node:e}=y(...t);return e},g=(...e)=>{const o=e.length,r=e[o-1];let s,i;n(r)?(s=r,i=null):(s=e[o-2],i=r);const a=e.splice(0,o-1).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e));if(a.length>0){const t=s.length,e=[];for(let n=0;n<t;n++)e.push(a[n]);const n=d(),o=()=>{n.val=s(...e.map(t=>t.val))},r={nodes:a,func:o,ref:i};return a.forEach(t=>{const e=t.target.trans;if(!e.has(r))if(i){const t=[...e].find(t=>t.ref==i);t?(_(t),e.add(r)):e.add(r)}else e.has(r)||e.add(r)}),o(),{node:n,transition:r}}return null},w=(...t)=>{const{node:e}=g(...t);return e},_=t=>{t.nodes.forEach(e=>{e.target.trans.delete(t)})},E=t=>t.isNode?t:d(t),O=(t,e)=>b([t],t=>t[e]),x=(n,o)=>{const r=w(n,t=>e(t)?t[o]:null);return w(r,()=>{const s=n.val;if(s&&"object"==typeof s){const e=t(s)?s.slice():i(s);e[o]=r.val,n.val=e}else if(e(r.val)){const t={};t[o]=r.val,n.val=t}}),r},A=(e,n)=>{let o,r;t(n)?[o,r]=n:(o=n,r=n);const s=x(e,r);return e.target[o]=s,s},z=t=>{const e=d(t);if("object"==typeof t){new Set(Object.keys(t)).forEach(t=>{A(e,t)})}return e},M=(...e)=>{const n=e.length,o=e[n-1],r=e.splice(0,n-1).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e)),s=T(...r);o(),S(s)},T=(...t)=>{const e=new Set,n=new Set;t.forEach(t=>{t.target.inTransaction=!0,t.target.delayedTransitions=e,t.target.delayedChanges=n});return{nodes:t,delayedTransitions:e,delayedChanges:n}},S=t=>{const{nodes:e,delayedTransitions:n,delayedChanges:o}=t;o.forEach(({target:t,value:e})=>{t.old=t.val,t.val=e,t.changed=!0}),n.forEach(t=>{t.func()}),e.forEach(t=>{t.target.inTransaction=!1,t.target.changed=!1,t.target.delayedTransitions=null,t.target.delayedChanges=null})},C=(e,...n)=>{const o=n.map(e=>e?e.isNode?t(e.val)?e:b(e,c):e.isEntry?e:E(c(e)):d([]));return{isTree:!0,elem:e,children:0==o.length?d([]):1==o.length?o[0]:b(o,()=>o.map(t=>t.val).reduce((t,e)=>t.concat(e)))}},R=C,k=(t,e,n=[])=>{const o=e(t.elem,t,n),r=t.children.isEntry?t.children:b(t.children,t=>t.map((t,o)=>k(t,e,n.concat(o))));return t.elem=o,t.children=r,t},j=(t,e=[])=>n=>k(n,t,e),P={isEntry:!0},$=(t,e)=>(t.children.isEntry?t.children=e:t.children=b(t.children,t=>t.map(t=>$(t,e))),t),D=(t,e)=>{let n;return n=t.children==e?P:b(t.children,t=>t.map(t=>D(t,e))),C(t.elem,n)},N=(e,n,o=null,r=[])=>{const s=n(e,o,r),i=t(s),a=i?s[0]:s,c=i?s[1]:o,l=a?D(a,e.children):null,u=b(e.children,t=>t.map((t,e)=>N(t,n,c,r.concat(e))));return a?$(l,u):null},W=(t,e=null,n=[])=>o=>N(o,t,e,n),L=(t,e)=>{let n=null;return N(t,(t,o,r)=>{a(r,e)&&(n=t)}),n},V=t=>e=>L(e,t),B=t=>k(t,t=>C(t,P)),H=t=>{const e=t.elem;return e.isTree?H($(e,t.children)):(t.children=b(t.children,t=>t.map(H)),t)},q={color:({elem:t,node:e})=>()=>{t.style["background-color"]=e.val},show:({elem:t,node:e})=>()=>{e.val?t.style.display="block":t.style.display="none"}};var G=t=>k(t,t=>(t.style&&o(t.style,([e,n])=>{const o=E(n),r=q[e];if(r){console.log("jjsd",t);const e=r({node:o,elem:t.inst.dom,rect:t});t.tran(o,e)}}),t));const F={click:({rect:t,channel:e})=>{t.addEvent("click",t=>{e.put=t})},mouseOver:({rect:t,channel:e})=>{t.addEvent("mouseover",t=>{e.put=t})},mouseEnter:({rect:t,channel:e})=>{t.addEvent("mouseenter",t=>{e.put=t})},mouseMove:({rect:t,channel:e})=>{t.addEvent("mousemove",t=>{e.put=t})},drag:({rect:t,channel:e})=>{let n=!1;t.addEvent("mousedown",t=>{n=!0,e.put=t}),t.addEvent("mouseup",()=>{n=!1,e.put=!1}),t.addEvent("mousemove",t=>{n&&(e.put=t)})},mouseOut:({rect:t,channel:e})=>{t.addEvent("mouseout",t=>{e.put=t})}};var I=t=>k(t,t=>(t.events&&o(t.events,([e,n])=>{if(n.isChan){const o=F[e];o&&o({channel:n,elem:t.inst.dom,rect:t})}}),t));const J=(t,e)=>({rel:t,px:e}),K=t=>J(0,t),Q=(t,n)=>{const o=e(t.rel)?t:{px:0,rel:t},r=e(n.rel)?n:{px:0,rel:n};return J(o.rel+r.rel,o.px+r.px)},U=(t,n)=>{const o=e(n.rel)?n:{px:0,rel:n};return J(o.rel*t,o.px*t)},X=(t,e)=>[Q(t[0],e[0]),Q(t[1],e[1])],Y=(t,e)=>[U(t,e[0]),U(t,e[1])],Z=t=>e(t.px)?t.px:0,tt=t=>e(t.rel)?t.rel:t,et=t=>J(tt(t),Z(t)),nt=([t,e])=>[[tt(t),tt(e)],[Z(t),Z(e)]],ot=([t,e])=>[K(t),K(e)],rt=([t,e])=>[st(t),st(e)],st=t=>t.rel?i(t):t,it=t=>ct([t,100]),at=t=>ct([100,t]),ct=t=>{const e=t.isNode?t:d(t);return A(e,"0"),A(e,["x","0"]),A(e,"1"),A(e,["y","1"]),e},lt={},ut={fullSize:({rect:t,tree:e,node:n})=>{t.tran([e.children],()=>{const t=e.children.val.map(t=>{const e=t.elem.layout;return b(e.posAbs,e.sizAbs,()=>[l(e.posAbs.val,e.sizAbs.val),X(e.pos.val,e.siz.val)])});b(t,()=>{const e=rt(t.map(t=>t.val).reduce((t,e)=>{const[n,o]=t,[r,s]=e,[i,a]=n,[c,l]=o,[u,d]=r,[h,f]=s;return[[i>u?i:u,a>d?a:d],[i>u?c:h,a>d?l:f]]})[1]);n.val=e})})},fullSizeCor:({rect:t,node:e})=>{const n=d(),o=t.layout.sizAbs,r=t.layout.scale,s=t.inst.par.layout.sizAbs;t.tran([n,o,s,r],()=>{const[[t,i],[a,c]]=nt(n.val),[l,u]=o.val,[d,h]=s.val;e.val=[J(t*l/d*r.val[0],a),J(i*u/h*r.val[1],c)]})},scrollAbs:({elem:t,rect:e,node:n})=>{e.addEvent("scroll",()=>{n.val=[t.scrollLeft,t.scrollTop]}),e.tran([n],()=>{const[e,o]=n.val;t.scrollLeft=e,t.scrollTop=o})},id:({elem:t,rect:e,node:n})=>{e.unsafeTran(n,e=>{e&&t.setAttribute("id",e)})},scroll:({elem:t,rect:e,node:n})=>{const o=e.tran([e.layout.sizAbs],e=>{const n=t.scrollWidth,o=t.scrollHeight,r=Math.round(e[0]),s=Math.round(e[1]);return[n-r>=0?n-r:0,o-s>=0?o-s:0]});e.addEvent("scroll",()=>{const e=o.val;n.val=[0===e[0]?0:t.scrollLeft/e[0]*100,0===e[1]?0:t.scrollTop/e[1]*100]}),e.tran([n],()=>{const[e,r]=n.val,s=o.val,i=[Math.round(e/100*s[0]),Math.round(r/100*s[1])];t.scrollLeft!=i[0]&&(t.scrollLeft=i[0]),t.scrollTop!=i[1]&&(t.scrollTop=i[1])},lt)}};var dt=t=>k(t,(t,e)=>(t.nodes&&o(t.nodes,([n,o])=>{const r="fullSize"==n?o:E(o),s=ut[n];s&&s({node:r,elem:t.inst.dom,rect:t,tree:e})}),t));const ht=(t,e)=>ft({get:t,ports:new Set,isChan:!0,info:e}),ft=t=>new Proxy(t,{get:pt,set:vt}),pt=(t,e)=>"target"==e?t:t[e],vt=(t,e,n)=>"put"==e&&(t.get=n,t.ports.forEach(t=>{t.func()}),!0),mt=(...e)=>{const o=e.length,r=e[o-1];let s,i,a;n(r)?(s=r,i=null,a=1):(s=e[o-2],i=r,a=2);const c=e.splice(0,o-a).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e));if(c.length>0){const t=s.length,e=[];for(let n=0;n<t;n++)e.push(c[n]);const n=ht(),o={chans:c,func:()=>{const t=s(...e.map(t=>t.get));t&&(n.put=t)},ref:i};return c.forEach(t=>{const e=t.target.ports;if(!e.has(o))if(i){const t=[...e].find(t=>t.ref==i);t?(bt(t),e.add(o)):e.add(o)}else e.has(o)||e.add(o)}),{chan:n,listener:o}}return null},yt=(...t)=>{const{chan:e}=mt(...t);return e},bt=t=>{t.chans.forEach(e=>{e.target.ports.delete(t)})},gt=(...t)=>{const e=t.length,o=t[e-1];let r,s,i;n(o)?(r=o,s=null,i=t.splice(0,e-1)):(r=t[e-2],s=o,i=t.splice(0,e-2));const a=mt(...i,()=>{r(),bt(a.listener)},s);return a},wt=(t={})=>{const e={pos:ct([0,0]),siz:ct([100,100]),posAbs:d(),sizAbs:d(),scale:ct([1,1]),disablePos:d(!1),disableSiz:d(!1),posChanged:ht(),sizChanged:ht(),posAbsChanged:ht(),sizAbsChanged:ht(),enablePosAbs:d(!1),enableSizAbs:d(!1)},n={tag:"div",isRect:!0,isSupp:!1,isCore:!0,oldVersions:[],init:ht(),stop:ht(),created:d(),removed:d(),inst:null,transitions:new Set,listeners:new Set,domEvents:[],data:new WeakMap([[wt,{}]]),layout:e,tran:Et,tranRef:_t,listen:zt,listenRef:At,unsafeTran:xt,unsafeTranRef:Ot,addEvent:Rt,withInst:kt,withDOM:jt,withPar:Pt},o={};if(t.data)if((i=t.data).constructor&&"WeakMap"==i.constructor.name)o.data=t.data;else{const e=c(t.data);o.data=new WeakMap(e.map(({key:t,val:e})=>[t,[e]]))}var i;t.layout&&(o.layout=s(e,t.layout));const a=s(n,t,o);return a.layout&&(a.layout=r(t=>t.isChan?t:E(t),a.layout)),a},_t=function(...t){const e=y(...t);return this.transitions.add(e.transition),e},Et=function(...t){const{transition:e,node:n}=y(...t);return this.transitions.add(e),n},Ot=function(...t){const e=g(...t);return this.transitions.add(e.transition),e},xt=function(...t){const{transition:e,node:n}=g(...t);return this.transitions.add(e),n},At=function(...t){const e=mt(...t);return this.listeners.add(e.listener),e},zt=function(...t){const{listener:e,chan:n}=mt(...t);return this.listeners.add(e),n},Mt=t=>{const e=wt(t);return e.isSupp=!0,e.isCore=!1,e},Tt=(t,e)=>{const n={};if(o(e,([e,o])=>{t[e]&&(t=>!!t&&"object"==typeof t&&t.constructor&&"Array"!=t.constructor.name)(t[e])?n[e]=s(t[e],o):n[e]=o}),e.data){const o=c(e.data);n.data=t.data,o.forEach(({key:t,val:e})=>{if(n.data.has(t)){const e=n.data.get(t);n.data.set(e.concat(t))}else n.data.set(t,[e])})}return n.inst=null,n.init=ht(),n.created=d(),n.oldVersions=t.oldVersions.concat([t]),wt(s(t,n))},St=(t,e)=>({key:t,val:e}),Ct=t=>{const e=t.inst.dom;t.domEvents.forEach(({name:t})=>{e["on"+t]=null})},Rt=function(t,e){this.inst.dom["on"+t]=e,this.domEvents.push({name:t,func:e})},kt=function(t){const e=this;gt(e.init,()=>t(e.inst))},jt=function(t){const e=this;gt(e.init,()=>t(e.inst.dom))},Pt=function(t){const e=this;gt(e.init,()=>t(e.inst.par))},$t=(t,e)=>C(wt(t),e),Dt=(t,e)=>C(Mt(t),e),Nt=t=>e=>k(n=>t(n)?e(n):n),Wt=(t,e)=>(n,o)=>k(r=>t(r)?n(r):e(r)?o(r):r),Lt=Nt(t=>t.isCore),Vt=Nt(t=>t.isSupp),Bt=Nt(t=>t.isTree),Ht=t=>e=>C(t(e.elem),e.children),qt=(t,e)=>C(e(t.elem),t.children),Gt=(t,e)=>qt(t,t=>Tt(t,e)),Ft=(t,e,n,o)=>{const r=ct(o.scale),s=ct(t.pos),i=t.disablePos,a=t.posChanged,c=t.enablePosAbs;n.tran([s,r,i,c],()=>{if(!c.val)if(i.val){if("x"==i.val){const[t,n]=nt(s.val),o=r.val,i=t[1]*o[1];e.style.top=0==i?n[1]+"px":`calc(${i}% + ${n[1]}px)`,a.put=!0}else if("y"==i.val){const[t,n]=nt(s.val),o=r.val,i=t[0]*o[0];e.style.left=0==i?n[0]+"px":`calc(${i}% + ${n[0]}px)`,a.put=!0}}else{const[t,n]=nt(s.val),o=r.val,i=[t[0]*o[0],t[1]*o[1]];0==i[0]?e.style.left=n[0]+"px":e.style.left=`calc(${i[0]}% + ${n[0]}px)`,0==i[1]?e.style.top=n[1]+"px":e.style.top=`calc(${i[1]}% + ${n[1]}px)`,a.put=!0}});const l=ct(t.siz),u=t.disableSiz,d=t.sizChanged,h=t.enableSizAbs;n.tran([l,r,u,h],()=>{if(!h.val)if(u.val){if("x"==u.val){const[t,n]=nt(l.val),o=r.val,s=t[1]*o[1];e.style.height=0==s?n[1]+"px":`calc(${s}% + ${n[1]}px)`,d.put=!0}else if("y"==u.val){const[t,n]=nt(l.val),o=r.val,s=t[0]*o[0];e.style.width=0==s?n[0]+"px":`calc(${s}% + ${n[0]}px)`,d.put=!0}}else{const[t,n]=nt(l.val),o=r.val,s=[t[0]*o[0],t[1]*o[1]];0==s[0]?e.style.width=n[0]+"px":e.style.width=`calc(${s[0]}% + ${n[0]}px)`,0==s[1]?e.style.height=n[1]+"px":e.style.height=`calc(${s[1]}% + ${n[1]}px)`,d.put=!0}})},It=(t,e,n,o,r,s,i,a,c,u,d,h)=>{t.tran([e,n,o,r,s,c,u].map(ct),(e,n,o,r,s)=>{const[f,p]=nt(e),[v,m]=nt(n);let y=[s[0]*o[0]/100,s[1]*o[1]/100],b=[v[0]*y[0],v[1]*y[1]],g=[f[0]*y[0]+r[0],f[1]*y[1]+r[1]];i.val=l(g,p),c.val&&(d.val||("x"==d.val?t.inst.dom.style.left=i.val[0]-r[0]+"px":("y"==d.val||(t.inst.dom.style.left=i.val[0]-r[0]+"px"),t.inst.dom.style.top=i.val[1]-r[1]+"px"))),a.val=l(b,m),u.val&&(h.val||("x"==h.val?t.inst.dom.style.width=a.val[0]+"px":("y"==h.val||(t.inst.dom.style.width=a.val[0]+"px"),t.inst.dom.style.height=a.val[1]+"px"))),t.layout.posAbsChanged.put=!0,t.layout.sizAbsChanged.put=!0})};var Jt=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,o){return t[0]===e&&(n=o,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),o=this.__entries__[n];return o&&o[1]},e.prototype.set=function(e,n){var o=t(this.__entries__,e);~o?this.__entries__[o][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,o=t(n,e);~o&&n.splice(o,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,o=this.__entries__;n<o.length;n++){var r=o[n];t.call(e,r[1],r[0])}},e}()}(),Kt="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Qt="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Ut="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Qt):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var Xt=["top","right","bottom","left","width","height","size","weight"],Yt="undefined"!=typeof MutationObserver,Zt=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,o=!1,r=0;function s(){n&&(n=!1,t()),o&&a()}function i(){Ut(s)}function a(){var t=Date.now();if(n){if(t-r<2)return;o=!0}else n=!0,o=!1,setTimeout(i,e);r=t}return a}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){Kt&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Yt?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){Kt&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;Xt.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),te=function(t,e){for(var n=0,o=Object.keys(e);n<o.length;n++){var r=o[n];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},ee=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||Qt},ne=ce(0,0,0,0);function oe(t){return parseFloat(t)||0}function re(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+oe(t["border-"+n+"-width"])}),0)}function se(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return ne;var o=ee(t).getComputedStyle(t),r=function(t){for(var e={},n=0,o=["top","right","bottom","left"];n<o.length;n++){var r=o[n],s=t["padding-"+r];e[r]=oe(s)}return e}(o),s=r.left+r.right,i=r.top+r.bottom,a=oe(o.width),c=oe(o.height);if("border-box"===o.boxSizing&&(Math.round(a+s)!==e&&(a-=re(o,"left","right")+s),Math.round(c+i)!==n&&(c-=re(o,"top","bottom")+i)),!function(t){return t===ee(t).document.documentElement}(t)){var l=Math.round(a+s)-e,u=Math.round(c+i)-n;1!==Math.abs(l)&&(a-=l),1!==Math.abs(u)&&(c-=u)}return ce(r.left,r.top,a,c)}var ie="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof ee(t).SVGGraphicsElement}:function(t){return t instanceof ee(t).SVGElement&&"function"==typeof t.getBBox};function ae(t){return Kt?ie(t)?function(t){var e=t.getBBox();return ce(0,0,e.width,e.height)}(t):se(t):ne}function ce(t,e,n,o){return{x:t,y:e,width:n,height:o}}var le=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ce(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=ae(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),ue=function(t,e){var n=function(t){var e=t.x,n=t.y,o=t.width,r=t.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,i=Object.create(s.prototype);return te(i,{x:e,y:n,width:o,height:r,top:n,right:e+o,bottom:r+n,left:e}),i}(e);te(this,{target:t,contentRect:n})},de=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new Jt,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof ee(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new le(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof ee(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new ue(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),he="undefined"!=typeof WeakMap?new WeakMap:new Jt,fe=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Zt.getInstance(),o=new de(e,n,this);he.set(this,o)};["observe","unobserve","disconnect"].forEach((function(t){fe.prototype[t]=function(){var e;return(e=he.get(this))[t].apply(e,arguments)}}));var pe=void 0!==Qt.ResizeObserver?Qt.ResizeObserver:fe;const ve=t=>be(G(I(dt(ge(t))))),me=(t,e)=>be(G(I(dt(we(t,e))))),ye=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],be=t=>k(t,t=>(t.css&&o(t.css,([e,n])=>{const o=E(n),r=t.inst.dom;t.tran(o,t=>{r.style[e]=t})}),t)),ge=t=>{const e=d(ye()),n={layout:{posAbs:d([0,0]),sizAbs:e,scale:d([1,1])},flex:!1,inst:{dom:document.body}};if(window.onresize){const t=window.onresize;window.onresize=()=>{const n=t();return e.val=n,n}}else window.onresize=()=>{const t=ye();return e.val=t,t};return _e(H(t),n)},we=(t,e)=>{const n=d([e.offsetWidth,e.offsetHeight]),o={layout:{posAbs:d([0,0]),sizAbs:n,scale:d([1,1])},flex:!1,inst:{dom:e}};return Ae(e),new pe(t=>{const e=t[0],{width:o,height:r}=e.contentRect;n.val=[o,r]}).observe(e),_e(H(t),o)},_e=(t,e)=>{const n=t.elem;xe();const o=document.createElement(n.tag);Ae(o),e.inst.dom.appendChild(o),n.inst={dom:o,par:e};const r=n.layout;return Ft(r,o,n,e.layout),It(n,r.pos,r.siz,e.layout.scale,e.layout.posAbs,e.layout.sizAbs,r.posAbs,r.sizAbs,r.enablePosAbs,r.enableSizAbs,r.disablePos,r.disableSiz),n.oldVersions.forEach(t=>{t.inst=n.inst,t.init.put=!0,t.created.val=!0}),n.init.put=!0,n.created.val=!0,Ee(t.children,n),t},Ee=(t,e)=>{e.tran(t,()=>{let n=t.val,o=t.old;o||(o=[]),n||(n=[]),console.log("sl, neu",o,n,o[0]==n[0],o[0]==n[1]);const r=o.filter(t=>!n.includes(t)),s=n.filter(t=>!o.includes(t));console.log("ayeooo",r,s,t),s.forEach(t=>_e(t,e)),r.forEach(t=>Oe(t))})},Oe=t=>{const e=t.elem,n=e.inst.dom;return n.parentNode.removeChild(n),e.transitions.forEach(t=>{_(t)}),e.listeners.forEach(t=>{bt(t)}),Ct(e),e.inst=null,e.stop.put=!0,e.removed.val=!0,e.created.val=!1,t.children.val=t.children.val.map(Oe),t},xe=()=>{if(!document.getElementById("dabr-style")){const t=".dabr::-webkit-scrollbar {width: 0 !important;height: 0 !important;}.dabr {overflow: -moz-scrollbars-none;scrollbar-width: none;-ms-overflow-style: none;}",e=document.createElement("style");e.setAttribute("id","dabr-style"),e.textContent=t,document.head.append(e)}},Ae=t=>{t.className="dabr",t.style.position="absolute",t.style["overflow-y"]="scroll",t.style["overflow-x"]="scroll"},ze=t=>{const e=wt(),n=e.layout.sizAbs,o=new Map,r=new Map,s=t=>{if(t.elem.inst){const e=t.elem.inst.dom,{top:n,left:r}=e.getBoundingClientRect();o.get(e).val=ot([r,n])}};b(n,()=>{const e=[];[...o].entries(([,t])=>{e.push(t)}),M(e,()=>{t.forEach(s)})});const i=new ResizeObserver(t=>{const e=[];[...r].entries(([,t])=>{e.push(t)}),M(e,()=>{t.forEach(t=>{const{width:e,height:n}=t.contentRect;0!=e&&0!=n&&(r.get(t.target).val=ot([e,n]))})})}),a=t.map(t=>{const e=t.elem,n=Tt(e,{layout:{disablePos:!0,disableSiz:!0}});return n.withDOM(e=>{o.set(e,n.layout.pos),r.set(e,n.layout.siz),setTimeout(()=>s(t),0),i.observe(e)}),C(n,t.children)});return C(e,a)},Me=t=>{const e=wt(),n=new Map,o=new Map,r=new ResizeObserver(t=>{const e=[];[...o].entries(([,t])=>{e.push(t)}),M(e,()=>{t.forEach(t=>{const{width:e,height:n}=t.contentRect;0!=e&&0!=n&&(o.get(t.target).val=ot([e,n]))})})}),s=t.map(t=>{const e=t.elem,s=Tt(e,{layout:{disableSiz:!0}});return s.withDOM(t=>{n.set(t,s.layout.pos),o.set(t,s.layout.siz),r.observe(t)}),C(s,t.children)});return C(e,s)},Te=t=>{const e=wt(),n=e.layout.sizAbs,o=new Map,r=new Map,s=t=>{if(t.elem.inst){const e=t.elem.inst.dom,{top:n,left:r}=e.getBoundingClientRect();o.get(e).val=ot([r,n])}};b(n,()=>{const e=[];[...o].entries(([,t])=>{e.push(t)}),M(e,()=>{t.forEach(s)})});const i=t.map(t=>{const e=t.elem,n=Tt(e,{layout:{disablePos:!0}});return n.withDOM(e=>{o.set(e,n.layout.pos),r.set(e,n.layout.siz),setTimeout(()=>s(t),0)}),C(n,t.children)});return C(e,i)};export{P as Entry,ze as External,Te as ExternalPos,Me as ExternalSiz,wt as Rect,$t as RectT,Mt as Supp,Dt as SuppT,R as T,C as Tree,j as _mapT,V as _pathT,W as _walkT,I as addChans,X as addCoord,Ft as addLayoutTriggers,Q as addLen,dt as addNodes,G as addStyle,A as addSubNode,u as applyF,ot as asPx,ht as chan,Nt as cond,Wt as condElse,ct as coord,rt as copyCoord,st as copyLen,Lt as core,It as defaultLayoutReactivity,S as endTransaction,H as fromStruc,Z as getPx,tt as getRel,St as keyed,J as len,yt as listen,gt as listenOnce,mt as listenRef,k as mapT,Y as mulCoord,U as mulLen,d as node,z as nodeObj,L as pathT,Tt as preserveR,Gt as preserveT,K as px,Ct as removeEvents,bt as removeListen,Oe as removeRect,_ as removeTran,ve as run,me as runDOM,ge as runRect,we as runRectDOM,nt as splitCoord,T as startTransaction,x as subNode,O as subNode1,Vt as supp,et as toLen,E as toNode,B as toStruc,Ht as top,b as tran,y as tranRef,M as transaction,Bt as tree,w as unsafeTran,g as unsafeTranRef,N as walkT,qt as withTree,it as x,at as y};
