const t=t=>!!t&&t.constructor&&"Array"==t.constructor.name,e=e=>0==e&&!t(e)||!!e,n=t=>!!t&&"function"==typeof t,r=(t,e)=>Object.entries(t).map(e),o=(t,n)=>((t,n)=>(t=>{let e={};return t.forEach(([t,n])=>{e[t]=n}),e})(Object.entries(t).map(([t,e])=>{let r=n(e,t);return r?[t,r]:null}).filter(e)))(n,t),s=(...t)=>Object.assign({},...t),i=t=>Object.assign({},t),a=(t,e)=>{let n=[],r=[];return function t(e,o){var s;if(null==e&&null==o)return!0;if(null==e&&null==o)return!0;if(isNaN(e)&&isNaN(o)&&"number"==typeof e&&"number"==typeof o)return!0;if(e===o)return!0;if("function"==typeof e&&"function"==typeof o||e instanceof Date&&o instanceof Date||e instanceof RegExp&&o instanceof RegExp||e instanceof String&&o instanceof String||e instanceof Number&&o instanceof Number)return e.toString()===o.toString();if(!(e instanceof Object&&o instanceof Object))return!1;if(e.isPrototypeOf(o)||o.isPrototypeOf(e))return!1;if(e.constructor!==o.constructor)return!1;if(e.prototype!==o.prototype)return!1;if(n.indexOf(e)>-1||r.indexOf(o)>-1)return!1;for(s in o){if(o.hasOwnProperty(s)!==e.hasOwnProperty(s))return!1;if(typeof o[s]!=typeof e[s])return!1}for(s in e){if(o.hasOwnProperty(s)!==e.hasOwnProperty(s))return!1;if(typeof o[s]!=typeof e[s])return!1;switch(typeof e[s]){case"object":case"function":if(n.push(e),r.push(o),!t(e[s],o[s]))return!1;n.pop(),r.pop();break;default:if(e[s]!==o[s])return!1}}return!0}(t,e)},c=e=>t(e)?e:[e],l=(t,e)=>{return n=e,r=(t,e)=>t+e,t.map((t,e)=>r(t,n[e]));var n,r},u=t=>e=>t.reduce((t,e)=>e(t),e),d=(t=null,e=new WeakMap)=>h({val:t,old:null,trans:new Set,changed:!1,isNode:!0,info:e,change:m,inTransaction:!1,delayedTransitions:null,delayedChanges:null}),h=t=>new Proxy(t,{set:p,get:f}),f=(t,e)=>"target"==e?t:t[e],p=(t,e,n)=>{if("val"==e){if(!t.changed&&!a(t.val,n))if(t.inTransaction){const e=t.delayedTransitions;t.delayedChanges.add({target:t,value:n}),t.trans.forEach(t=>{e.add(t)})}else t.old=t.val,t.val=n,t.changed=!0,t.trans.forEach(t=>{t.func()}),t.changed=!1;return!0}return!1},v=t=>t.map(t=>e(t.val)).reduce((t,e)=>t&&e,!0),m=function(t){this.val=t(this.val)},y=(...e)=>{const r=e.length,o=e[r-1];let s,i,a;n(o)?(s=o,i=null,a=1):(s=e[r-2],i=o,a=2);const c=e.splice(0,r-a).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e));if(c.length>0){const t=s.length,e=[];for(let n=0;n<t;n++)e.push(c[n]);const n=d(),r=()=>{v(c)&&(n.val=s(...e.map(t=>t.val)))},o={nodes:c,func:r,ref:i};return c.forEach(t=>{const e=t.target.trans;if(!e.has(o))if(i){const t=[...e].find(t=>t.ref==i);t?(_(t),e.add(o)):e.add(o)}else e.has(o)||e.add(o)}),v(c)&&r(),{node:n,transition:o}}return null},b=(...t)=>{const{node:e}=y(...t);return e},g=(...e)=>{const r=e.length,o=e[r-1];let s,i;n(o)?(s=o,i=null):(s=e[r-2],i=o);const a=e.splice(0,r-1).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e));if(a.length>0){const t=s.length,e=[];for(let n=0;n<t;n++)e.push(a[n]);const n=d(),r=()=>{n.val=s(...e.map(t=>t.val))},o={nodes:a,func:r,ref:i};return a.forEach(t=>{const e=t.target.trans;if(!e.has(o))if(i){const t=[...e].find(t=>t.ref==i);t?(_(t),e.add(o)):e.add(o)}else e.has(o)||e.add(o)}),r(),{node:n,transition:o}}return null},w=(...t)=>{const{node:e}=g(...t);return e},_=t=>{t.nodes.forEach(e=>{e.target.trans.delete(t)})},E=t=>t.isNode?t:d(t),O=(t,e)=>b([t],t=>t[e]),x=(n,r)=>{const o=w(n,t=>e(t)?t[r]:null);return w(o,()=>{const s=n.val;if(s&&"object"==typeof s){const e=t(s)?s.slice():i(s);e[r]=o.val,n.val=e}else if(e(o.val)){const t={};t[r]=o.val,n.val=t}}),o},A=(e,n)=>{let r,o;t(n)?[r,o]=n:(r=n,o=n);const s=x(e,o);return e.target[r]=s,s},z=t=>{const e=d(t);if("object"==typeof t){new Set(Object.keys(t)).forEach(t=>{A(e,t)})}return e},M=(...e)=>{const n=e.length,r=e[n-1],o=e.splice(0,n-1).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e)),s=T(...o);r(),S(s)},T=(...t)=>{const e=new Set,n=new Set;t.forEach(t=>{t.target.inTransaction=!0,t.target.delayedTransitions=e,t.target.delayedChanges=n});return{nodes:t,delayedTransitions:e,delayedChanges:n}},S=t=>{const{nodes:e,delayedTransitions:n,delayedChanges:r}=t;r.forEach(({target:t,value:e})=>{t.old=t.val,t.val=e,t.changed=!0}),n.forEach(t=>{t.func()}),e.forEach(t=>{t.target.inTransaction=!1,t.target.changed=!1,t.target.delayedTransitions=null,t.target.delayedChanges=null})},C=(e,...n)=>{const r=n.map(e=>e?e.isNode?t(e.val)?e:b(e,c):e.isEntry?e:E(c(e)):d([]));return{isTree:!0,elem:e,children:0==r.length?d([]):1==r.length?r[0]:b(r,()=>r.map(t=>t.val).reduce((t,e)=>t.concat(e)))}},R=C,k=(t,e,n=[])=>{const r=e(t.elem,t,n),o=t.children.isEntry?t.children:b(t.children,t=>t.map((t,r)=>k(t,e,n.concat(r))));return t.elem=r,t.children=o,t},P=(t,e=[])=>n=>k(n,t,e),j={isEntry:!0},$=(t,e)=>(t.children.isEntry?t.children=e:t.children=b(t.children,t=>t.map(t=>$(t,e))),t),D=(t,e)=>{let n;return n=t.children==e?j:b(t.children,t=>t.map(t=>D(t,e))),C(t.elem,n)},N=(e,n,r=null,o=[])=>{const s=n(e,r,o),i=t(s),a=i?s[0]:s,c=i?s[1]:r,l=a?D(a,e.children):null,u=b(e.children,t=>t.map((t,e)=>N(t,n,c,o.concat(e))));return a?$(l,u):null},W=(t,e=null,n=[])=>r=>N(r,t,e,n),L=(t,e)=>{let n=null;return N(t,(t,r,o)=>{a(o,e)&&(n=t)}),n},B=t=>e=>L(e,t),H=t=>k(t,t=>C(t,j)),V=t=>{const e=t.elem;return e.isTree?V($(e,t.children)):(t.children=b(t.children,t=>t.map(V)),t)},q={color:({elem:t,node:e})=>()=>{t.style["background-color"]=e.val},show:({elem:t,node:e})=>()=>{e.val?t.style.display="block":t.style.display="none"}};var G=t=>k(t,t=>(t.style&&r(t.style,([e,n])=>{const r=E(n),o=q[e];if(o){const e=o({node:r,elem:t.inst.dom,rect:t});t.tran(r,e)}}),t));const F={click:({rect:t,channel:e})=>{t.addEvent("click",t=>{e.put=t})},mouseOver:({rect:t,channel:e})=>{t.addEvent("mouseover",t=>{e.put=t})},mouseEnter:({rect:t,channel:e})=>{t.addEvent("mouseenter",t=>{e.put=t})},mouseMove:({rect:t,channel:e})=>{t.addEvent("mousemove",t=>{e.put=t})},drag:({rect:t,channel:e})=>{let n=!1;t.addEvent("mousedown",t=>{n=!0,e.put=t}),t.addEvent("mouseup",()=>{n=!1,e.put=!1}),t.addEvent("mousemove",t=>{n&&(e.put=t)})},mouseOut:({rect:t,channel:e})=>{t.addEvent("mouseout",t=>{e.put=t})}};var I=t=>k(t,t=>(t.events&&r(t.events,([e,n])=>{if(n.isChan){const r=F[e];r&&r({channel:n,elem:t.inst.dom,rect:t})}}),t));const J=(t,e)=>({rel:t,px:e}),K=t=>J(0,t),Q=(t,n)=>{const r=e(t.rel)?t:{px:0,rel:t},o=e(n.rel)?n:{px:0,rel:n};return J(r.rel+o.rel,r.px+o.px)},U=(t,n)=>{const r=e(n.rel)?n:{px:0,rel:n};return J(r.rel*t,r.px*t)},X=(t,e)=>[Q(t[0],e[0]),Q(t[1],e[1])],Y=(t,e)=>[U(t,e[0]),U(t,e[1])],Z=t=>e(t.px)?t.px:0,tt=t=>e(t.rel)?t.rel:t,et=t=>J(tt(t),Z(t)),nt=([t,e])=>[[tt(t),tt(e)],[Z(t),Z(e)]],rt=([t,e])=>[K(t),K(e)],ot=([t,e])=>[st(t),st(e)],st=t=>t.rel?i(t):t,it=t=>ct([t,100]),at=t=>ct([100,t]),ct=t=>{const e=t.isNode?t:d(t);return A(e,"0"),A(e,["x","0"]),A(e,"1"),A(e,["y","1"]),e},lt={},ut={fullSize:({rect:t,tree:e,node:n})=>{t.tran([e.children],()=>{const t=e.children.val.map(t=>{const e=t.elem.layout;return b(e.posAbs,e.sizAbs,()=>[l(e.posAbs.val,e.sizAbs.val),X(e.pos.val,e.siz.val)])});b(t,()=>{const e=ot(t.map(t=>t.val).reduce((t,e)=>{const[n,r]=t,[o,s]=e,[i,a]=n,[c,l]=r,[u,d]=o,[h,f]=s;return[[i>u?i:u,a>d?a:d],[i>u?c:h,a>d?l:f]]})[1]);n.val=e})})},fullSizeCor:({rect:t,node:e})=>{const n=d(),r=t.layout.sizAbs,o=t.layout.scale,s=t.inst.par.layout.sizAbs;t.tran([n,r,s,o],()=>{const[[t,i],[a,c]]=nt(n.val),[l,u]=r.val,[d,h]=s.val;e.val=[J(t*l/d*o.val[0],a),J(i*u/h*o.val[1],c)]})},scrollAbs:({elem:t,rect:e,node:n})=>{e.addEvent("scroll",()=>{n.val=[t.scrollLeft,t.scrollTop]}),e.tran([n],()=>{const[e,r]=n.val;t.scrollLeft=e,t.scrollTop=r})},id:({elem:t,rect:e,node:n})=>{e.unsafeTran(n,e=>{e&&t.setAttribute("id",e)})},scroll:({elem:t,rect:e,node:n})=>{const r=e.tran([e.layout.sizAbs],e=>{const n=t.scrollWidth,r=t.scrollHeight,o=Math.round(e[0]),s=Math.round(e[1]);return[n-o>=0?n-o:0,r-s>=0?r-s:0]});e.addEvent("scroll",()=>{const e=r.val;n.val=[0===e[0]?0:t.scrollLeft/e[0]*100,0===e[1]?0:t.scrollTop/e[1]*100]}),e.tran([n],()=>{const[e,o]=n.val,s=r.val,i=[Math.round(e/100*s[0]),Math.round(o/100*s[1])];t.scrollLeft!=i[0]&&(t.scrollLeft=i[0]),t.scrollTop!=i[1]&&(t.scrollTop=i[1])},lt)}};var dt=t=>k(t,(t,e)=>(t.nodes&&r(t.nodes,([n,r])=>{const o="fullSize"==n?r:E(r),s=ut[n];s&&s({node:o,elem:t.inst.dom,rect:t,tree:e})}),t));const ht=(t,e)=>ft({get:t,ports:new Set,isChan:!0,info:e}),ft=t=>new Proxy(t,{get:pt,set:vt}),pt=(t,e)=>"target"==e?t:t[e],vt=(t,e,n)=>"put"==e&&(t.get=n,t.ports.forEach(t=>{t.func()}),!0),mt=(...e)=>{const r=e.length,o=e[r-1];let s,i,a;n(o)?(s=o,i=null,a=1):(s=e[r-2],i=o,a=2);const c=e.splice(0,r-a).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e));if(c.length>0){const t=s.length,e=[];for(let n=0;n<t;n++)e.push(c[n]);const n=ht(),r={chans:c,func:()=>{const t=s(...e.map(t=>t.get));t&&(n.put=t)},ref:i};return c.forEach(t=>{const e=t.target.ports;if(!e.has(r))if(i){const t=[...e].find(t=>t.ref==i);t?(bt(t),e.add(r)):e.add(r)}else e.has(r)||e.add(r)}),{chan:n,listener:r}}return null},yt=(...t)=>{const{chan:e}=mt(...t);return e},bt=t=>{t.chans.forEach(e=>{e.target.ports.delete(t)})},gt=(...t)=>{const e=t.length,r=t[e-1];let o,s,i;n(r)?(o=r,s=null,i=t.splice(0,e-1)):(o=t[e-2],s=r,i=t.splice(0,e-2));const a=mt(...i,()=>{o(),bt(a.listener)},s);return a},wt=(t={})=>{const e={pos:ct([0,0]),siz:ct([100,100]),posAbs:d(),sizAbs:d(),scale:ct([1,1]),disablePos:d(!1),disableSiz:d(!1),posChanged:ht(),sizChanged:ht(),posAbsChanged:ht(),sizAbsChanged:ht(),enablePosAbs:d(!1),enableSizAbs:d(!1)},n={tag:"div",isRect:!0,isSupp:!1,isCore:!0,oldVersions:[],init:ht(),stop:ht(),created:d(),removed:d(),inst:null,transitions:new Set,listeners:new Set,domEvents:[],data:new WeakMap([[wt,{}]]),layout:e,tran:Et,tranRef:_t,listen:zt,listenRef:At,unsafeTran:xt,unsafeTranRef:Ot,addEvent:Rt,withInst:kt,withDOM:Pt,withPar:jt},r={};if(t.data)if((i=t.data).constructor&&"WeakMap"==i.constructor.name)r.data=t.data;else{const e=c(t.data);r.data=new WeakMap(e.map(({key:t,val:e})=>[t,[e]]))}var i;t.layout&&(r.layout=s(e,t.layout));const a=s(n,t,r);return a.layout&&(a.layout=o(t=>t.isChan?t:E(t),a.layout)),a},_t=function(...t){const e=y(...t);return this.transitions.add(e.transition),e},Et=function(...t){const{transition:e,node:n}=y(...t);return this.transitions.add(e),n},Ot=function(...t){const e=g(...t);return this.transitions.add(e.transition),e},xt=function(...t){const{transition:e,node:n}=g(...t);return this.transitions.add(e),n},At=function(...t){const e=mt(...t);return this.listeners.add(e.listener),e},zt=function(...t){const{listener:e,chan:n}=mt(...t);return this.listeners.add(e),n},Mt=t=>{const e=wt(t);return e.isSupp=!0,e.isCore=!1,e},Tt=(t,e)=>(r(e,([n,r])=>{if("data"==n){c(e.data).forEach(({key:e,val:n})=>{if(t.data.has(e)){const n=t.data.get(e);t.data.set(n.concat(e))}else t.data.set(e,[n])})}else"layout"==n?t.layout=s(t.layout,o(t=>t.isChan?t:E(t),r)):t[n]&&(t=>!!t&&"object"==typeof t&&t.constructor&&"Array"!=t.constructor.name)(t[n])?t[n]=s(t[n],r):t[n]=r}),t),St=(t,e)=>({key:t,val:e}),Ct=t=>{const e=t.inst.dom;t.domEvents.forEach(({name:t})=>{e["on"+t]=null})},Rt=function(t,e){this.inst.dom["on"+t]=e,this.domEvents.push({name:t,func:e})},kt=function(t){const e=this;gt(e.init,()=>t(e.inst))},Pt=function(t){const e=this;gt(e.init,()=>t(e.inst.dom))},jt=function(t){const e=this;gt(e.init,()=>t(e.inst.par))},$t=(t,e)=>C(wt(t),e),Dt=(t,e)=>C(Mt(t),e),Nt=t=>e=>k(n=>t(n)?e(n):n),Wt=(t,e)=>(n,r)=>k(o=>t(o)?n(o):e(o)?r(o):o),Lt=Nt(t=>t.isCore),Bt=Nt(t=>t.isSupp),Ht=Nt(t=>t.isTree),Vt=t=>e=>C(t(e.elem),e.children),qt=(t,e)=>(t.elem=e(t.elem),t),Gt=(t,e)=>qt(t,t=>Tt(t,e)),Ft=(t,e,n,r)=>{const o=ct(r.scale),s=ct(t.pos),i=t.disablePos,a=t.posChanged,c=t.enablePosAbs;n.tran([s,o,i,c],()=>{if(!c.val)if(i.val){if("x"==i.val){const[t,n]=nt(s.val),r=o.val,i=t[1]*r[1];e.style.top=0==i?n[1]+"px":`calc(${i}% + ${n[1]}px)`,a.put=!0}else if("y"==i.val){const[t,n]=nt(s.val),r=o.val,i=t[0]*r[0];e.style.left=0==i?n[0]+"px":`calc(${i}% + ${n[0]}px)`,a.put=!0}}else{const[t,n]=nt(s.val),r=o.val,i=[t[0]*r[0],t[1]*r[1]];0==i[0]?e.style.left=n[0]+"px":e.style.left=`calc(${i[0]}% + ${n[0]}px)`,0==i[1]?e.style.top=n[1]+"px":e.style.top=`calc(${i[1]}% + ${n[1]}px)`,a.put=!0}});const l=ct(t.siz),u=t.disableSiz,d=t.sizChanged,h=t.enableSizAbs;n.tran([l,o,u,h],()=>{if(!h.val)if(u.val){if("x"==u.val){const[t,n]=nt(l.val),r=o.val,s=t[1]*r[1];e.style.height=0==s?n[1]+"px":`calc(${s}% + ${n[1]}px)`,d.put=!0}else if("y"==u.val){const[t,n]=nt(l.val),r=o.val,s=t[0]*r[0];e.style.width=0==s?n[0]+"px":`calc(${s}% + ${n[0]}px)`,d.put=!0}}else{const[t,n]=nt(l.val),r=o.val,s=[t[0]*r[0],t[1]*r[1]];0==s[0]?e.style.width=n[0]+"px":e.style.width=`calc(${s[0]}% + ${n[0]}px)`,0==s[1]?e.style.height=n[1]+"px":e.style.height=`calc(${s[1]}% + ${n[1]}px)`,d.put=!0}})},It=(t,e,n,r,o,s,i,a,c,u,d,h)=>{t.tran([e,n,r,o,s,c,u].map(ct),(e,n,r,o,s)=>{const[f,p]=nt(e),[v,m]=nt(n);let y=[s[0]*r[0]/100,s[1]*r[1]/100],b=[v[0]*y[0],v[1]*y[1]],g=[f[0]*y[0]+o[0],f[1]*y[1]+o[1]];i.val=l(g,p),c.val&&(d.val||("x"==d.val?t.inst.dom.style.left=i.val[0]-o[0]+"px":("y"==d.val||(t.inst.dom.style.left=i.val[0]-o[0]+"px"),t.inst.dom.style.top=i.val[1]-o[1]+"px"))),a.val=l(b,m),u.val&&(h.val||("x"==h.val?t.inst.dom.style.width=a.val[0]+"px":("y"==h.val||(t.inst.dom.style.width=a.val[0]+"px"),t.inst.dom.style.height=a.val[1]+"px"))),t.layout.posAbsChanged.put=!0,t.layout.sizAbsChanged.put=!0})};var Jt=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];t.call(e,o[1],o[0])}},e}()}(),Kt="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Qt="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Ut="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Qt):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var Xt=["top","right","bottom","left","width","height","size","weight"],Yt="undefined"!=typeof MutationObserver,Zt=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,o=0;function s(){n&&(n=!1,t()),r&&a()}function i(){Ut(s)}function a(){var t=Date.now();if(n){if(t-o<2)return;r=!0}else n=!0,r=!1,setTimeout(i,e);o=t}return a}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){Kt&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Yt?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){Kt&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;Xt.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),te=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},ee=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||Qt},ne=ce(0,0,0,0);function re(t){return parseFloat(t)||0}function oe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+re(t["border-"+n+"-width"])}),0)}function se(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return ne;var r=ee(t).getComputedStyle(t),o=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],s=t["padding-"+o];e[o]=re(s)}return e}(r),s=o.left+o.right,i=o.top+o.bottom,a=re(r.width),c=re(r.height);if("border-box"===r.boxSizing&&(Math.round(a+s)!==e&&(a-=oe(r,"left","right")+s),Math.round(c+i)!==n&&(c-=oe(r,"top","bottom")+i)),!function(t){return t===ee(t).document.documentElement}(t)){var l=Math.round(a+s)-e,u=Math.round(c+i)-n;1!==Math.abs(l)&&(a-=l),1!==Math.abs(u)&&(c-=u)}return ce(o.left,o.top,a,c)}var ie="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof ee(t).SVGGraphicsElement}:function(t){return t instanceof ee(t).SVGElement&&"function"==typeof t.getBBox};function ae(t){return Kt?ie(t)?function(t){var e=t.getBBox();return ce(0,0,e.width,e.height)}(t):se(t):ne}function ce(t,e,n,r){return{x:t,y:e,width:n,height:r}}var le=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ce(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=ae(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),ue=function(t,e){var n=function(t){var e=t.x,n=t.y,r=t.width,o=t.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,i=Object.create(s.prototype);return te(i,{x:e,y:n,width:r,height:o,top:n,right:e+r,bottom:o+n,left:e}),i}(e);te(this,{target:t,contentRect:n})},de=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new Jt,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof ee(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new le(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof ee(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new ue(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),he="undefined"!=typeof WeakMap?new WeakMap:new Jt,fe=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Zt.getInstance(),r=new de(e,n,this);he.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){fe.prototype[t]=function(){var e;return(e=he.get(this))[t].apply(e,arguments)}}));var pe=void 0!==Qt.ResizeObserver?Qt.ResizeObserver:fe;const ve=t=>be(G(I(dt(ge(t))))),me=(t,e)=>be(G(I(dt(we(t,e))))),ye=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],be=t=>k(t,t=>(t.css&&r(t.css,([e,n])=>{const r=E(n),o=t.inst.dom;t.tran(r,t=>{o.style[e]=t})}),t)),ge=t=>{const e=d(ye()),n={layout:{posAbs:d([0,0]),sizAbs:e,scale:d([1,1])},flex:!1,inst:{dom:document.body}};if(window.onresize){const t=window.onresize;window.onresize=()=>{const n=t();return e.val=n,n}}else window.onresize=()=>{const t=ye();return e.val=t,t};return _e(V(t),n)},we=(t,e)=>{const n=d([e.offsetWidth,e.offsetHeight]),r={layout:{posAbs:d([0,0]),sizAbs:n,scale:d([1,1])},flex:!1,inst:{dom:e}};return Ae(e),new pe(t=>{const e=t[0],{width:r,height:o}=e.contentRect;n.val=[r,o]}).observe(e),_e(V(t),r)},_e=(t,e)=>{const n=t.elem;xe();const r=document.createElement(n.tag);Ae(r),e.inst.dom.appendChild(r),n.inst={dom:r,par:e};const o=n.layout;return Ft(o,r,n,e.layout),It(n,o.pos,o.siz,e.layout.scale,e.layout.posAbs,e.layout.sizAbs,o.posAbs,o.sizAbs,o.enablePosAbs,o.enableSizAbs,o.disablePos,o.disableSiz),n.oldVersions.forEach(t=>{t.inst=n.inst,t.init.put=!0,t.created.val=!0}),n.init.put=!0,n.created.val=!0,Ee(t.children,n),t},Ee=(t,e)=>{e.tran(t,()=>{let n=t.val,r=t.old;r||(r=[]),n||(n=[]);const o=r.filter(t=>!n.includes(t));n.filter(t=>!r.includes(t)).forEach(t=>_e(t,e)),o.forEach(t=>Oe(t))})},Oe=t=>{const e=t.elem,n=e.inst.dom;return n.parentNode.removeChild(n),e.transitions.forEach(t=>{_(t)}),e.listeners.forEach(t=>{bt(t)}),Ct(e),e.inst=null,e.stop.put=!0,e.removed.val=!0,e.created.val=!1,t.children.val=t.children.val.map(Oe),t},xe=()=>{if(!document.getElementById("dabr-style")){const t=".dabr::-webkit-scrollbar {width: 0 !important;height: 0 !important;}.dabr {overflow: -moz-scrollbars-none;scrollbar-width: none;-ms-overflow-style: none;}",e=document.createElement("style");e.setAttribute("id","dabr-style"),e.textContent=t,document.head.append(e)}},Ae=t=>{t.className="dabr",t.style.position="absolute",t.style["overflow-y"]="scroll",t.style["overflow-x"]="scroll"},ze=t=>{const e=wt(),n=e.layout.sizAbs,r=new Map,o=new Map,s=t=>{if(t.elem.inst){const e=t.elem.inst.dom,{top:n,left:o}=e.getBoundingClientRect();r.get(e).val=rt([o,n])}};b(n,()=>{const e=[];[...r].entries(([,t])=>{e.push(t)}),M(e,()=>{t.forEach(s)})});const i=new ResizeObserver(t=>{const e=[];[...o].entries(([,t])=>{e.push(t)}),M(e,()=>{t.forEach(t=>{const{width:e,height:n}=t.contentRect;0!=e&&0!=n&&(o.get(t.target).val=rt([e,n]))})})}),a=t.map(t=>{const e=t.elem,n=Tt(e,{layout:{disablePos:!0,disableSiz:!0}});return n.withDOM(e=>{r.set(e,n.layout.pos),o.set(e,n.layout.siz),setTimeout(()=>s(t),0),i.observe(e)}),C(n,t.children)});return C(e,a)},Me=t=>{const e=wt(),n=new Map,r=new Map,o=new ResizeObserver(t=>{const e=[];[...r].entries(([,t])=>{e.push(t)}),M(e,()=>{t.forEach(t=>{const{width:e,height:n}=t.contentRect;0!=e&&0!=n&&(r.get(t.target).val=rt([e,n]))})})}),s=t.map(t=>{const e=t.elem,s=Tt(e,{layout:{disableSiz:!0}});return s.withDOM(t=>{n.set(t,s.layout.pos),r.set(t,s.layout.siz),o.observe(t)}),C(s,t.children)});return C(e,s)},Te=t=>{const e=wt(),n=e.layout.sizAbs,r=new Map,o=new Map,s=t=>{if(t.elem.inst){const e=t.elem.inst.dom;if(r.has(e)){const{top:t,left:n}=e.getBoundingClientRect();r.get(e).val=rt([n,t])}}};b(n,()=>{const e=[];[...r].entries(([,t])=>{e.push(t)}),M(e,()=>{t.forEach(s)})});const i=t.map(t=>{const e=t.elem,n=Tt(e,{layout:{disablePos:!0}});return n.withDOM(e=>{r.set(e,n.layout.pos),o.set(e,n.layout.siz),setTimeout(()=>s(t),0)}),C(n,t.children)});return C(e,i)};export{j as Entry,ze as External,Te as ExternalPos,Me as ExternalSiz,wt as Rect,$t as RectT,Mt as Supp,Dt as SuppT,R as T,C as Tree,P as _mapT,B as _pathT,W as _walkT,I as addChans,X as addCoord,Ft as addLayoutTriggers,Q as addLen,dt as addNodes,G as addStyle,A as addSubNode,u as applyF,rt as asPx,ht as chan,Nt as cond,Wt as condElse,ct as coord,ot as copyCoord,st as copyLen,Lt as core,It as defaultLayoutReactivity,S as endTransaction,V as fromStruc,Z as getPx,tt as getRel,St as keyed,J as len,yt as listen,gt as listenOnce,mt as listenRef,k as mapT,Y as mulCoord,U as mulLen,d as node,z as nodeObj,L as pathT,Tt as preserveR,Gt as preserveT,K as px,Ct as removeEvents,bt as removeListen,Oe as removeRect,_ as removeTran,ve as run,me as runDOM,ge as runRect,we as runRectDOM,nt as splitCoord,T as startTransaction,x as subNode,O as subNode1,Bt as supp,et as toLen,E as toNode,H as toStruc,Vt as top,b as tran,y as tranRef,M as transaction,Ht as tree,w as unsafeTran,g as unsafeTranRef,N as walkT,qt as withTree,it as x,at as y};
