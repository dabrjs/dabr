const t=t=>!!t&&t.constructor&&"Array"==t.constructor.name,e=e=>0==e&&!t(e)||!!e,n=t=>!!t&&"function"==typeof t,r=(t,e)=>Object.entries(t).map(e),o=(t,n)=>((t,n)=>(t=>{let e={};return t.forEach(([t,n])=>{e[t]=n}),e})(Object.entries(t).map(([t,e])=>{let r=n(e,t);return r?[t,r]:null}).filter(e)))(n,t),s=(...t)=>Object.assign({},...t),i=t=>Object.assign({},t),a=(t,e)=>{let n=[],r=[];return function t(e,o){var s;if(null==e&&null==o)return!0;if(null==e&&null==o)return!0;if(isNaN(e)&&isNaN(o)&&"number"==typeof e&&"number"==typeof o)return!0;if(e===o)return!0;if("function"==typeof e&&"function"==typeof o||e instanceof Date&&o instanceof Date||e instanceof RegExp&&o instanceof RegExp||e instanceof String&&o instanceof String||e instanceof Number&&o instanceof Number)return e.toString()===o.toString();if(!(e instanceof Object&&o instanceof Object))return!1;if(e.isPrototypeOf(o)||o.isPrototypeOf(e))return!1;if(e.constructor!==o.constructor)return!1;if(e.prototype!==o.prototype)return!1;if(n.indexOf(e)>-1||r.indexOf(o)>-1)return!1;for(s in o){if(o.hasOwnProperty(s)!==e.hasOwnProperty(s))return!1;if(typeof o[s]!=typeof e[s])return!1}for(s in e){if(o.hasOwnProperty(s)!==e.hasOwnProperty(s))return!1;if(typeof o[s]!=typeof e[s])return!1;switch(typeof e[s]){case"object":case"function":if(n.push(e),r.push(o),!t(e[s],o[s]))return!1;n.pop(),r.pop();break;default:if(e[s]!==o[s])return!1}}return!0}(t,e)},c=e=>t(e)?e:[e],l=(t,e)=>{return n=e,r=(t,e)=>t+e,t.map((t,e)=>r(t,n[e]));var n,r},u=t=>e=>t.reduce((t,e)=>e(t),e),d=(t=null,e=new WeakMap)=>h({val:t,old:null,trans:new Set,changed:!1,isNode:!0,info:e,change:m}),h=t=>new Proxy(t,{set:p,get:f}),f=(t,e)=>"target"==e?t:t[e],p=(t,e,n)=>"val"==e&&(t.changed||a(t.val,n)||(t.old=t.val,t.val=n,t.changed=!0,t.trans.forEach(e=>{e.func()&&t.trans.delete(e)}),t.changed=!1),!0),v=t=>t.map(t=>e(t.val)).reduce((t,e)=>t&&e,!0),m=function(t){this.val=t(this.val)},b=(...e)=>{const r=e.length,o=e[r-1];let s,i,a;n(o)?(s=o,i=null,a=1):(s=e[r-2],i=o,a=2);const c=e.splice(0,r-a).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e));if(c.length>0){const t=s.length,e=[];for(let n=0;n<t;n++)e.push(c[n]);const n=d(),r=()=>{v(c)&&(n.val=s(...e.map(t=>t.val)))},o={nodes:c,func:r,ref:i};return c.forEach(t=>{const e=t.target.trans;if(!e.has(o))if(i){const t=[...e].find(t=>t.ref==i);t?(w(t),e.add(o)):e.add(o)}else e.has(o)||e.add(o)}),v(c)&&r(),{node:n,transition:o}}return null},y=(...t)=>{const{node:e}=b(...t);return e},g=(...e)=>{const r=e.length,o=e[r-1];let s,i;n(o)?(s=o,i=null):(s=e[r-2],i=o);const a=e.splice(0,r-1).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e));if(a.length>0){const t=s.length,e=[];for(let n=0;n<t;n++)e.push(a[n]);const n=d(),r=()=>{n.val=s(...e.map(t=>t.val))},o={nodes:a,func:r,ref:i};return a.forEach(t=>{const e=t.target.trans;if(!e.has(o))if(i){const t=[...e].find(t=>t.ref==i);t?(w(t),e.add(o)):e.add(o)}else e.has(o)||e.add(o)}),r(),{node:n,transition:o}}return null},_=(...t)=>{const{node:e}=g(...t);return e},w=t=>{t.nodes.forEach(e=>{e.target.trans.delete(t)})},E=t=>t.isNode?t:d(t),O=(t,e)=>y([t],t=>t[e]),A=(e,n)=>{const r=_(e,t=>t?t[n]:null);return _(r,()=>{const o=e.val;if(o&&"object"==typeof o){const s=t(o)?o.slice():i(o);s[n]=r.val,e.val=s}else if(r.val){const t={};t[n]=r.val,e.val=t}}),r},x=(e,n)=>{let r,o;t(n)?[r,o]=n:(r=n,o=n);const s=A(e,o);return e.target[r]=s,s},z=t=>{const e=d(t);if("object"==typeof t){new Set(Object.keys(t)).forEach(t=>{x(e,t)})}return e},M=(e,...n)=>{const r=n.map(e=>e?e.isNode?t(e.val)?e:y(e,c):e.isEntry?e:E(c(e)):d([]));return{isTree:!0,elem:e,children:0==r.length?d([]):1==r.length?r[0]:y(r,()=>r.map(t=>t.val).reduce((t,e)=>t.concat(e)))}},T=M,S=(t,e,n=[])=>M(e(t.elem,t,n),t.children.isEntry?t.children:y(t.children,t=>t.map((t,r)=>S(t,e,n.concat(r))))),k=(t,e=[])=>n=>S(n,t,e),C={isEntry:!0},R=(t,e)=>(t.children.isEntry?t.children=e:t.children=y(t.children,t=>t.map(t=>R(t,e))),t),j=(t,e)=>{let n;return n=t.children==e?C:y(t.children,t=>t.map(t=>j(t,e))),M(t.elem,n)},N=(e,n,r=null,o=[])=>{const s=n(e,r,o),i=t(s),a=i?s[0]:s,c=i?s[1]:r,l=a?j(a,e.children):null,u=y(e.children,t=>t.map((t,e)=>N(t,n,c,o.concat(e))));return a?R(l,u):null},P=(t,e=null,n=[])=>r=>N(r,t,e,n),W=(t,e)=>{let n=null;return N(t,(t,r,o)=>{a(o,e)&&(n=t)}),n},D=t=>e=>W(e,t),L=t=>S(t,t=>M(t,C)),V=t=>{const e=t.elem;return e.isTree?V(R(e,t.children)):(t.children=y(t.children,t=>t.map(V)),t)},$={color:({elem:t,node:e})=>()=>{t.style["background-color"]=e.val},show:({elem:t,node:e})=>()=>{e.val?t.style.display="block":t.style.display="none"}};var H=t=>S(t,t=>(t.style&&r(t.style,([e,n])=>{const r=E(n),o=$[e];if(o){const e=o({node:r,elem:t.inst.dom,rect:t});t.tran(r,e)}}),t));const q={click:({rect:t,channel:e})=>{t.addEvent("click",t=>{e.put=t})},mouseOver:({rect:t,channel:e})=>{t.addEvent("mouseover",t=>{e.put=t})},mouseEnter:({rect:t,channel:e})=>{t.addEvent("mouseenter",t=>{e.put=t})},mouseMove:({rect:t,channel:e})=>{t.addEvent("mousemove",t=>{e.put=t})},drag:({rect:t,channel:e})=>{let n=!1;t.addEvent("mousedown",t=>{n=!0,e.put=t}),t.addEvent("mouseup",()=>{n=!1,e.put=!1}),t.addEvent("mousemove",t=>{n&&(e.put=t)})},mouseOut:({rect:t,channel:e})=>{t.addEvent("mouseout",t=>{e.put=t})}};var B=t=>S(t,t=>(t.events&&r(t.events,([e,n])=>{if(n.isChan){const r=q[e];r&&r({channel:n,elem:t.inst.dom,rect:t})}}),t));const G=(t,e)=>({rel:t,px:e}),F=t=>G(0,t),I=(t,n)=>{const r=e(t.rel)?t:{px:0,rel:t},o=e(n.rel)?n:{px:0,rel:n};return G(r.rel+o.rel,r.px+o.px)},J=(t,n)=>{const r=e(n.rel)?n:{px:0,rel:n};return G(r.rel*t,r.px*t)},K=(t,e)=>[I(t[0],e[0]),I(t[1],e[1])],Q=(t,e)=>[J(t,e[0]),J(t,e[1])],U=t=>e(t.px)?t.px:0,X=t=>e(t.rel)?t.rel:t,Y=t=>G(X(t),U(t)),Z=([t,e])=>[[X(t),X(e)],[U(t),U(e)]],tt=([t,e])=>[F(t),F(e)],et=([t,e])=>[nt(t),nt(e)],nt=t=>t.rel?i(t):t,rt=t=>st([t,100]),ot=t=>st([100,t]),st=t=>{const e=t.isNode?t:d(t);return x(e,"0"),x(e,["x","0"]),x(e,"1"),x(e,["y","1"]),e},it={},at={fullSize:({rect:t,tree:e,node:n})=>{t.tran([e.children],()=>{const t=e.children.val.map(t=>{const e=t.elem.layout;return y(e.posAbs,e.sizAbs,()=>[l(e.posAbs.val,e.sizAbs.val),K(e.pos.val,e.siz.val)])});y(t,()=>{const e=et(t.map(t=>t.val).reduce((t,e)=>{const[n,r]=t,[o,s]=e,[i,a]=n,[c,l]=r,[u,d]=o,[h,f]=s;return[[i>u?i:u,a>d?a:d],[i>u?c:h,a>d?l:f]]})[1]);n.val=e})})},fullSizeCor:({rect:t,node:e})=>{const n=d(),r=t.layout.sizAbs,o=t.layout.scale,s=t.inst.par.layout.sizAbs;t.tran([n,r,s,o],()=>{const[[t,i],[a,c]]=Z(n.val),[l,u]=r.val,[d,h]=s.val;e.val=[G(t*l/d*o.val[0],a),G(i*u/h*o.val[1],c)]})},scrollAbs:({elem:t,rect:e,node:n})=>{e.addEvent("scroll",()=>{n.val=[t.scrollLeft,t.scrollTop]}),e.tran([n],()=>{const[e,r]=n.val;t.scrollLeft=e,t.scrollTop=r})},id:({elem:t,rect:e,node:n})=>{e.unsafeTran(n,e=>{e&&t.setAttribute("id",e)})},scroll:({elem:t,rect:e,node:n})=>{const r=e.tran([e.layout.sizAbs],e=>{const n=t.scrollWidth,r=t.scrollHeight,o=Math.round(e[0]),s=Math.round(e[1]);return[n-o>=0?n-o:0,r-s>=0?r-s:0]});e.addEvent("scroll",()=>{const e=r.val;n.val=[0===e[0]?0:t.scrollLeft/e[0]*100,0===e[1]?0:t.scrollTop/e[1]*100]}),e.tran([n],()=>{const[e,o]=n.val,s=r.val,i=[Math.round(e/100*s[0]),Math.round(o/100*s[1])];t.scrollLeft!=i[0]&&(t.scrollLeft=i[0]),t.scrollTop!=i[1]&&(t.scrollTop=i[1])},it)}};var ct=t=>S(t,(t,e)=>(t.nodes&&r(t.nodes,([n,r])=>{const o="fullSize"==n?r:E(r),s=at[n];s&&s({node:o,elem:t.inst.dom,rect:t,tree:e})}),t));const lt=(t,e)=>ut({get:t,ports:new Set,isChan:!0,info:e}),ut=t=>new Proxy(t,{get:dt,set:ht}),dt=(t,e)=>"target"==e?t:t[e],ht=(t,e,n)=>"put"==e&&(t.get=n,t.ports.forEach(t=>{t.func()}),!0),ft=(...e)=>{const r=e.length,o=e[r-1];let s,i,a;n(o)?(s=o,i=null,a=1):(s=e[r-2],i=o,a=2);const c=e.splice(0,r-a).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e));if(c.length>0){const t=s.length,e=[];for(let n=0;n<t;n++)e.push(c[n]);const n=lt(),r={chans:c,func:()=>{const t=s(...e.map(t=>t.get));t&&(n.put=t)},ref:i};return c.forEach(t=>{const e=t.target.ports;if(!e.has(r))if(i){const t=[...e].find(t=>t.ref==i);t?(vt(t),e.add(r)):e.add(r)}else e.has(r)||e.add(r)}),{chan:n,listener:r}}return null},pt=(...t)=>{const{chan:e}=ft(...t);return e},vt=t=>{t.chans.forEach(e=>{e.target.ports.delete(t)})},mt=(...t)=>{const e=t.length,r=t[e-1];let o,s,i;n(r)?(o=r,s=null,i=t.splice(0,e-1)):(o=t[e-2],s=r,i=t.splice(0,e-2));const a=ft(...i,()=>{o(),vt(a.listener)},s);return a},bt=(t={})=>{const e={pos:st([0,0]),siz:st([100,100]),posAbs:d(),sizAbs:d(),scale:st([1,1]),disablePos:d(!1),disableSiz:d(!1),posChanged:lt(),sizChanged:lt(),posAbsChanged:lt(),sizAbsChanged:lt()},n={isRect:!0,isSupp:!1,isCore:!0,oldVersions:[],init:lt(),stop:lt(),created:d(),removed:d(),inst:null,transitions:new Set,listeners:new Set,domEvents:[],data:new WeakMap([[bt,{}]]),layout:e,tran:gt,tranRef:yt,listen:Ot,listenRef:Et,unsafeTran:wt,unsafeTranRef:_t,addEvent:Tt,withInst:St,withDOM:kt,withPar:Ct},r={};if(t.data)if((i=t.data).constructor&&"WeakMap"==i.constructor.name)r.data=t.data;else{const e=c(t.data);r.data=new WeakMap(e.map(({key:t,val:e})=>[t,[e]]))}var i;t.layout&&(r.layout=s(e,t.layout));const a=s(n,t,r);return a.layout&&(a.layout=o(t=>t.isChan?t:E(t),a.layout)),a},yt=function(...t){const e=b(...t);return this.transitions.add(e.transition),e},gt=function(...t){const{transition:e,node:n}=b(...t);return this.transitions.add(e),n},_t=function(...t){const e=g(...t);return this.transitions.add(e.transition),e},wt=function(...t){const{transition:e,node:n}=g(...t);return this.transitions.add(e),n},Et=function(...t){const e=ft(...t);return this.listeners.add(e.listener),e},Ot=function(...t){const{listener:e,chan:n}=ft(...t);return this.listeners.add(e),n},At=t=>{const e=bt(t);return e.isSupp=!0,e.isCore=!1,e},xt=(t,e)=>{const n={};if(r(e,([e,r])=>{t[e]&&(t=>!!t&&"object"==typeof t&&t.constructor&&"Array"!=t.constructor.name)(t[e])?n[e]=s(t[e],r):n[e]=r}),e.data){const r=c(e.data);n.data=t.data,r.forEach(({key:t,val:e})=>{if(n.data.has(t)){const e=n.data.get(t);n.data.set(e.concat(t))}else n.data.set(t,[e])})}return n.inst=null,n.init=lt(),n.created=d(),n.oldVersions=t.oldVersions.concat([t]),bt(s(t,n))},zt=(t,e)=>({key:t,val:e}),Mt=t=>{const e=t.inst.dom;t.domEvents.forEach(({name:t})=>{e["on"+t]=null})},Tt=function(t,e){this.inst.dom["on"+t]=e,this.domEvents.push({name:t,func:e})},St=function(t){const e=this;mt(e.init,()=>t(e.inst))},kt=function(t){const e=this;mt(e.init,()=>t(e.inst.dom))},Ct=function(t){const e=this;mt(e.init,()=>t(e.inst.par))},Rt=(t,e)=>M(bt(t),e),jt=(t,e)=>M(At(t),e),Nt=t=>e=>S(n=>t(n)?e(n):n),Pt=(t,e)=>(n,r)=>S(o=>t(o)?n(o):e(o)?r(o):o),Wt=Nt(t=>t.isCore),Dt=Nt(t=>t.isSupp),Lt=Nt(t=>t.isTree),Vt=t=>e=>M(t(e.elem),e.children),$t=(t,e,n,r)=>{const o=st(r.scale),s=st(t.pos),i=t.disablePos,a=t.posChanged;n.tran([s,o,i],()=>{if(!i.val){const[t,n]=Z(s.val),r=o.val;e.style.left=`calc(${t[0]*r[0]}% + ${n[0]}px)`,e.style.top=`calc(${t[1]*r[1]}% + ${n[1]}px)`,a.put=!0}});const c=st(t.siz),l=t.disableSiz,u=t.sizChanged;n.tran([c,o,l],()=>{if(!l.val){const[t,n]=Z(c.val),r=o.val;e.style.width=`calc(${t[0]*r[0]}% + ${n[0]}px)`,e.style.height=`calc(${t[1]*r[1]}% + ${n[1]}px)`,u.put=!0}})},Ht=(t,e,n,r,o,s,i,a)=>{t.tran([e,n,r,o,s].map(st),(e,n,r,o,s)=>{const[c,u]=Z(e),[d,h]=Z(n);let f=[s[0]*r[0]/100,s[1]*r[1]/100],p=[d[0]*f[0],d[1]*f[1]],v=[c[0]*f[0]+o[0],c[1]*f[1]+o[1]];i.val=l(v,u),a.val=l(p,h),t.layout.posAbsChanged.put=!0,t.layout.sizAbsChanged.put=!0})};var qt=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];t.call(e,o[1],o[0])}},e}()}(),Bt="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Gt="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Ft="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Gt):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var It=["top","right","bottom","left","width","height","size","weight"],Jt="undefined"!=typeof MutationObserver,Kt=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,o=0;function s(){n&&(n=!1,t()),r&&a()}function i(){Ft(s)}function a(){var t=Date.now();if(n){if(t-o<2)return;r=!0}else n=!0,r=!1,setTimeout(i,e);o=t}return a}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){Bt&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Jt?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){Bt&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;It.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Qt=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},Ut=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||Gt},Xt=re(0,0,0,0);function Yt(t){return parseFloat(t)||0}function Zt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+Yt(t["border-"+n+"-width"])}),0)}function te(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Xt;var r=Ut(t).getComputedStyle(t),o=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],s=t["padding-"+o];e[o]=Yt(s)}return e}(r),s=o.left+o.right,i=o.top+o.bottom,a=Yt(r.width),c=Yt(r.height);if("border-box"===r.boxSizing&&(Math.round(a+s)!==e&&(a-=Zt(r,"left","right")+s),Math.round(c+i)!==n&&(c-=Zt(r,"top","bottom")+i)),!function(t){return t===Ut(t).document.documentElement}(t)){var l=Math.round(a+s)-e,u=Math.round(c+i)-n;1!==Math.abs(l)&&(a-=l),1!==Math.abs(u)&&(c-=u)}return re(o.left,o.top,a,c)}var ee="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof Ut(t).SVGGraphicsElement}:function(t){return t instanceof Ut(t).SVGElement&&"function"==typeof t.getBBox};function ne(t){return Bt?ee(t)?function(t){var e=t.getBBox();return re(0,0,e.width,e.height)}(t):te(t):Xt}function re(t,e,n,r){return{x:t,y:e,width:n,height:r}}var oe=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=re(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=ne(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),se=function(t,e){var n=function(t){var e=t.x,n=t.y,r=t.width,o=t.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,i=Object.create(s.prototype);return Qt(i,{x:e,y:n,width:r,height:o,top:n,right:e+r,bottom:o+n,left:e}),i}(e);Qt(this,{target:t,contentRect:n})},ie=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new qt,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Ut(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new oe(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Ut(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new se(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),ae="undefined"!=typeof WeakMap?new WeakMap:new qt,ce=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Kt.getInstance(),r=new ie(e,n,this);ae.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){ce.prototype[t]=function(){var e;return(e=ae.get(this))[t].apply(e,arguments)}}));var le=void 0!==Gt.ResizeObserver?Gt.ResizeObserver:ce;const ue=t=>fe(H(B(ct(pe(t))))),de=(t,e)=>fe(H(B(ct(ve(t,e))))),he=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],fe=t=>S(t,t=>(t.css&&r(t.css,([e,n])=>{const r=E(n),o=t.inst.dom;t.tran(r,t=>{o.style[e]=t})}),t)),pe=t=>{const e=d(he()),n={layout:{posAbs:d([0,0]),sizAbs:e,scale:d([1,1])},flex:!1,inst:{dom:document.body}};if(window.onresize){const t=window.onresize;window.onresize=()=>{const n=t();return e.val=n,n}}else window.onresize=()=>{const t=he();return e.val=t,t};return me(V(t),n)},ve=(t,e)=>{const n=d([e.offsetWidth,e.offsetHeight]),r={layout:{posAbs:d([0,0]),sizAbs:n,scale:d([1,1])},flex:!1,inst:{dom:e}};return _e(e),new le(t=>{const e=t[0],{width:r,height:o}=e.contentRect;n.val=[r,o]}).observe(e),me(V(t),r)},me=(t,e)=>{const n=t.elem;ge();const r=document.createElement("div");_e(r),e.inst.dom.appendChild(r),n.inst={dom:r,par:e};const o=n.layout;return $t(o,r,n,e.layout),Ht(n,o.pos,o.siz,e.layout.scale,e.layout.posAbs,e.layout.sizAbs,o.posAbs,o.sizAbs),n.oldVersions.forEach(t=>{t.inst=n.inst,t.init.put=!0,t.created.val=!0}),n.init.put=!0,n.created.val=!0,be(t.children,n),t},be=(t,e)=>{e.tran(t,()=>{let n=t.val,r=t.old;r||(r=[]),n||(n=[]);const o=r.filter(t=>!n.includes(t));n.filter(t=>!r.includes(t)).forEach(t=>me(t,e)),o.forEach(t=>ye(t))})},ye=t=>{const e=t.elem,n=e.inst.dom;return n.parentNode.removeChild(n),e.transitions.forEach(t=>{w(t)}),e.listeners.forEach(t=>{vt(t)}),Mt(e),e.inst=null,e.stop.put=!0,e.removed.val=!0,e.created.val=!1,t.children.val=t.children.val.map(ye),t},ge=()=>{if(!document.getElementById("dabr-style")){const t=".dabr::-webkit-scrollbar {width: 0 !important;height: 0 !important;}.dabr {overflow: -moz-scrollbars-none;scrollbar-width: none;-ms-overflow-style: none;}",e=document.createElement("style");e.setAttribute("id","dabr-style"),e.textContent=t,document.head.append(e)}},_e=t=>{t.className="dabr",t.style.position="absolute",t.style["overflow-y"]="scroll",t.style["overflow-x"]="scroll"};export{C as Entry,bt as Rect,Rt as RectT,At as Supp,jt as SuppT,T,M as Tree,k as _mapT,D as _pathT,P as _walkT,B as addChans,K as addCoord,$t as addLayoutTriggers,I as addLen,ct as addNodes,H as addStyle,x as addSubNode,u as applyF,tt as asPx,lt as chan,Nt as cond,Pt as condElse,st as coord,et as copyCoord,nt as copyLen,Wt as core,Ht as defaultLayoutReactivity,V as fromStruc,U as getPx,X as getRel,zt as keyed,G as len,pt as listen,mt as listenOnce,ft as listenRef,S as mapT,Q as mulCoord,J as mulLen,d as node,z as nodeObj,W as pathT,xt as preserveR,F as px,Mt as removeEvents,vt as removeListen,ye as removeRect,w as removeTran,ue as run,de as runDOM,pe as runRect,ve as runRectDOM,Z as splitCoord,A as subNode,O as subNode1,Dt as supp,Y as toLen,E as toNode,L as toStruc,Vt as top,y as tran,b as tranRef,Lt as tree,_ as unsafeTran,g as unsafeTranRef,N as walkT,rt as x,ot as y};
