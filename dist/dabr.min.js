const e=e=>!!e&&e.constructor&&"Array"==e.constructor.name,t=t=>0==t&&!e(t)||!!t&&"object"!=typeof t&&t.constructor&&"Array"!=t.constructor.name,n=e=>!!e&&"object"==typeof e&&e.constructor&&"Array"!=e.constructor.name,l=e=>null==e||null==e,s=t=>0==t&&!e(t)||!!t&&"number"==typeof t,o=t=>0==t&&!e(t)||!!t,a=e=>!!e&&"function"==typeof e,i=(e,t)=>Object.entries(e).map(t),r=(e,t)=>((e,t)=>(e=>{let t={};return e.forEach(([e,n])=>{t[e]=n}),t})(Object.entries(e).map(([e,n])=>{let l=t(n,e);return l?[e,l]:null}).filter(o)))(t,e),c=(...e)=>Object.assign({},...e),d=e=>e.slice(),u=e=>Object.assign({},e),h=(e,t)=>{let n=[],l=[];return function e(t,s){var o;if(null==t&&null==s)return!0;if(null==t&&null==s)return!0;if(isNaN(t)&&isNaN(s)&&"number"==typeof t&&"number"==typeof s)return!0;if(t===s)return!0;if("function"==typeof t&&"function"==typeof s||t instanceof Date&&s instanceof Date||t instanceof RegExp&&s instanceof RegExp||t instanceof String&&s instanceof String||t instanceof Number&&s instanceof Number)return t.toString()===s.toString();if(!(t instanceof Object&&s instanceof Object))return!1;if(t.isPrototypeOf(s)||s.isPrototypeOf(t))return!1;if(t.constructor!==s.constructor)return!1;if(t.prototype!==s.prototype)return!1;if(n.indexOf(t)>-1||l.indexOf(s)>-1)return!1;for(o in s){if(s.hasOwnProperty(o)!==t.hasOwnProperty(o))return!1;if(typeof s[o]!=typeof t[o])return!1}for(o in t){if(s.hasOwnProperty(o)!==t.hasOwnProperty(o))return!1;if(typeof s[o]!=typeof t[o])return!1;switch(typeof t[o]){case"object":case"function":if(n.push(t),l.push(s),!e(t[o],s[o]))return!1;n.pop(),l.pop();break;default:if(t[o]!==s[o])return!1}}return!0}(e,t)},p=t=>e(t)?t:[t],f=(e,t,n)=>e.map((e,l)=>n(e,t[l])),v=(e,t)=>f(e,t,(e,t)=>e+t),y=e=>t=>e.reduce((e,t)=>t(e),t),m=(e=null,t=new WeakMap)=>b({val:e,old:null,trans:new Set,changed:!1,isNode:!0,info:t,change:x,inTransaction:!1,delayedTransitions:null,delayedChanges:null}),b=e=>{const t=Proxy.revocable(e,{set:z,get:g});return e.revoke=t.revoke,t.proxy},g=(e,t)=>"target"==t?e:e[t],z=(e,t,n)=>{if("val"==t){if(!e.changed&&!h(e.val,n))if(e.inTransaction){const t=e.delayedTransitions;e.delayedChanges.add({target:e,value:n}),e.trans.forEach(e=>{t.add(e)})}else e.old=e.val,e.val=n,e.changed=!0,e.trans.forEach(e=>{e.func()}),e.changed=!1;return!0}return!1},w=e=>e.map(e=>o(e.val)).reduce((e,t)=>e&&t,!0),x=function(e){this.val=e(this.val)},E=(...t)=>{const n=t.length,l=t[n-1];let s,o,i;a(l)?(s=l,o=null,i=1):(s=t[n-2],o=l,i=2);const r=t.splice(0,n-i).map(t=>e(t)?t:[t]).reduce((e,t)=>e.concat(t));if(r.length>0){const e=s.length,t=[];for(let n=0;n<e;n++)t.push(r[n]);const n=m(),l=()=>{w(r)&&(n.val=s(...t.map(e=>e.val)))},a={nodes:r,func:l,ref:o};return r.forEach(e=>{const t=e.target.trans;if(!t.has(a))if(o){const e=[...t].find(e=>e.ref==o);e?(C(e),t.add(a)):t.add(a)}else t.has(a)||t.add(a)}),w(r)&&l(),{node:n,transition:a}}return null},A=(...e)=>{const{node:t}=E(...e);return t},O=(...t)=>{const n=t.length,l=t[n-1];let s,o;a(l)?(s=l,o=null):(s=t[n-2],o=l);const i=t.splice(0,n-1).map(t=>e(t)?t:[t]).reduce((e,t)=>e.concat(t));if(i.length>0){const e=s.length,t=[];for(let n=0;n<e;n++)t.push(i[n]);const n=m(),l=()=>{n.val=s(...t.map(e=>e.val))},a={nodes:i,func:l,ref:o};return i.forEach(e=>{const t=e.target.trans;if(!t.has(a))if(o){const e=[...t].find(e=>e.ref==o);e?(C(e),t.add(a)):t.add(a)}else t.has(a)||t.add(a)}),l(),{node:n,transition:a}}return null},S=(...e)=>{const{node:t}=O(...e);return t},C=e=>{e.nodes.forEach(t=>{t.target.trans.delete(e)})},T=e=>e.isNode?e:m(e),M=(e,t)=>A([e],e=>e[t]),P=(t,n)=>{const l=S(t,e=>o(e)?e[n]:null);return S(l,()=>{const s=t.val;if(s&&"object"==typeof s){const o=e(s)?d(s):u(s);o[n]=l.val,t.val=o}else if(o(l.val)){const e={};e[n]=l.val,t.val=e}}),l},k=(t,n)=>{let l,s;e(n)?[l,s]=n:(l=n,s=n);const o=P(t,s);return t.target[l]=o,o},R=e=>{const t=m(e);if("object"==typeof e){new Set(Object.keys(e)).forEach(e=>{k(t,e)})}return t},j=(...t)=>{const n=t.length,l=t[n-1],s=t.splice(0,n-1).map(t=>e(t)?t:[t]).reduce((e,t)=>e.concat(t)),o=$(...s);l(),N(o)},$=(...e)=>{const t=new Set,n=new Set;e.forEach(e=>{e.target.inTransaction=!0,e.target.delayedTransitions=t,e.target.delayedChanges=n});return{nodes:e,delayedTransitions:t,delayedChanges:n}},N=e=>{const{nodes:t,delayedTransitions:n,delayedChanges:l}=e;l.forEach(({target:e,value:t})=>{e.old=e.val,e.val=t,e.changed=!0}),n.forEach(e=>{e.func()}),t.forEach(e=>{e.target.inTransaction=!1,e.target.changed=!1,e.target.delayedTransitions=null,e.target.delayedChanges=null})},D=t=>t?t.isNode?e(t.val)?t:A(t,p):t.isEntry?t:T(p(t)):m([]),W=(e,t)=>({isTree:!0,elem:e,children:D(t)}),L=(e,t,n=[])=>{const l=t(e.elem,e,n),s=e.children.isEntry?e.children:A(e.children,e=>e.map((e,l)=>L(e,t,n.concat(l))));return e.elem=l,e.children=s,e},H=(e,t=[])=>n=>L(n,e,t),I={isEntry:!0},B=(e,t)=>(e.children.isEntry?e.children=t:e.children=A(e.children,e=>e.map(e=>B(e,t))),e),V=(e,t)=>{let n;return n=e.children==t?I:A(e.children,e=>e.map(e=>V(e,t))),W(e.elem,n)},F=(t,n,l=null,s=[])=>{const o=n(t,l,s),a=e(o),i=a?o[0]:o,r=a?o[1]:l,c=i?V(i,t.children):null,d=A(t.children,e=>e.map((e,t)=>F(e,n,r,s.concat(t))));return i?B(c,d):null},Y=(e,t=null,n=[])=>l=>F(l,e,t,n),q=(e,t)=>{let n=null;return F(e,(e,l,s)=>{h(s,t)&&(n=e)}),n},G=e=>t=>q(t,e),J=e=>L(e,e=>W(e,I)),K=e=>{const t=e.elem;return t.isTree?K(B(t,e.children)):(e.children=A(e.children,e=>e.map(K)),e)},Q={color:({elem:e,node:t})=>()=>{e.style["background-color"]=t.val},show:({elem:e,node:t})=>()=>{t.val?e.style.display="block":e.style.display="none"}};var U=e=>L(e,e=>(e.style&&i(e.style,([t,n])=>{const l=T(n),s=Q[t];if(s){const t=s({node:l,elem:e.inst.dom,rect:e});e.tran(l,t)}}),e));const X={click:({rect:e,channel:t})=>{e.addEvent("click",e=>{t.put=e})},mouseOver:({rect:e,channel:t})=>{e.addEvent("mouseover",e=>{t.put=e})},mouseEnter:({rect:e,channel:t})=>{e.addEvent("mouseenter",e=>{t.put=e})},mouseMove:({rect:e,channel:t})=>{e.addEvent("mousemove",e=>{t.put=e})},drag:({rect:e,channel:t})=>{let n=!1;e.addEvent("mousedown",e=>{n=!0,t.put=e}),e.addEvent("mouseup",()=>{n=!1,t.put=!1}),e.addEvent("mousemove",e=>{n&&(t.put=e)})},mouseOut:({rect:e,channel:t})=>{e.addEvent("mouseout",e=>{t.put=e})}};var Z=e=>L(e,e=>(e.events&&i(e.events,([t,n])=>{if(n.isChan){const l=X[t];l&&l({channel:n,elem:e.inst.dom,rect:e})}}),e));const _=(e,t)=>({rel:e,px:t}),ee=e=>_(0,e),te=(e,t)=>{const n=o(e.rel)?e:{px:0,rel:e},l=o(t.rel)?t:{px:0,rel:t};return _(n.rel+l.rel,n.px+l.px)},ne=(e,t)=>{const n=o(t.rel)?t:{px:0,rel:t};return _(n.rel*e,n.px*e)},le=(e,t)=>[te(e[0],t[0]),te(e[1],t[1])],se=(e,t)=>[ne(e,t[0]),ne(e,t[1])],oe=e=>o(e.px)?e.px:0,ae=e=>o(e.rel)?e.rel:e,ie=e=>_(ae(e),oe(e)),re=([e,t])=>[[ae(e),ae(t)],[oe(e),oe(t)]],ce=([e,t])=>[ee(e),ee(t)],de=([e,t])=>[ue(e),ue(t)],ue=e=>e.rel?u(e):e,he=e=>[e,100],pe=e=>[100,e],fe={},ve={fullSize:({rect:e,tree:t,node:n})=>{e.tran([t.children],()=>{const e=t.children.val.map(e=>{const t=e.elem.layout;return A(t.posAbs,t.sizAbs,()=>[v(t.posAbs.val,t.sizAbs.val),le(t.pos.val,t.siz.val)])});A(e,()=>{const t=de(e.map(e=>e.val).reduce((e,t)=>{const[n,l]=e,[s,o]=t,[a,i]=n,[r,c]=l,[d,u]=s,[h,p]=o;return[[a>d?a:d,i>u?i:u],[a>d?r:h,i>u?c:p]]})[1]);n.val=t})})},fullSizeCor:({rect:e,node:t})=>{const n=m(),l=e.layout.sizAbs,s=e.layout.scale,o=e.inst.par.layout.sizAbs;e.tran([n,l,o,s],()=>{const[[e,a],[i,r]]=re(n.val),[c,d]=l.val,[u,h]=o.val;t.val=[_(e*c/u*s.val[0],i),_(a*d/h*s.val[1],r)]})},scrollAbs:({elem:e,rect:t,node:n})=>{t.addEvent("scroll",()=>{n.val=[e.scrollLeft,e.scrollTop]}),t.tran([n],()=>{const[t,l]=n.val;e.scrollLeft=t,e.scrollTop=l})},id:({elem:e,rect:t,node:n})=>{t.unsafeTran(n,t=>{t&&e.setAttribute("id",t)})},scroll:({elem:e,rect:t,node:n})=>{const l=t.tran([t.layout.sizAbs],t=>{const n=e.scrollWidth,l=e.scrollHeight,s=Math.round(t[0]),o=Math.round(t[1]);return[n-s>=0?n-s:0,l-o>=0?l-o:0]});t.addEvent("scroll",()=>{const t=l.val;n.val=[0===t[0]?0:e.scrollLeft/t[0]*100,0===t[1]?0:e.scrollTop/t[1]*100]}),t.tran([n],()=>{const[t,s]=n.val,o=l.val,a=[Math.round(t/100*o[0]),Math.round(s/100*o[1])];e.scrollLeft!=a[0]&&(e.scrollLeft=a[0]),e.scrollTop!=a[1]&&(e.scrollTop=a[1])},fe)}};var ye=e=>L(e,(e,t)=>(e.nodes&&i(e.nodes,([n,l])=>{const s="fullSize"==n?l:T(l),o=ve[n];o&&o({node:s,elem:e.inst.dom,rect:e,tree:t})}),e));const me=(e,t)=>be({get:e,ports:new Set,isChan:!0,info:t}),be=e=>new Proxy(e,{get:ge,set:ze}),ge=(e,t)=>"target"==t?e:e[t],ze=(e,t,n)=>"put"==t&&(e.get=n,e.ports.forEach(e=>{e.func()}),!0),we=(...t)=>{const n=t.length,l=t[n-1];let s,o,i;a(l)?(s=l,o=null,i=1):(s=t[n-2],o=l,i=2);const r=t.splice(0,n-i).map(t=>e(t)?t:[t]).reduce((e,t)=>e.concat(t));if(r.length>0){const e=s.length,t=[];for(let n=0;n<e;n++)t.push(r[n]);const n=me(),l={chans:r,func:()=>{const e=s(...t.map(e=>e.get));e&&(n.put=e)},ref:o};return r.forEach(e=>{const t=e.target.ports;if(!t.has(l))if(o){const e=[...t].find(e=>e.ref==o);e?(Ee(e),t.add(l)):t.add(l)}else t.has(l)||t.add(l)}),{chan:n,listener:l}}return null},xe=(...e)=>{const{chan:t}=we(...e);return t},Ee=e=>{e.chans.forEach(t=>{t.target.ports.delete(e)})},Ae=(...e)=>{const t=e.length,n=e[t-1];let l,s,o;a(n)?(l=n,s=null,o=e.splice(0,t-1)):(l=e[t-2],s=n,o=e.splice(0,t-2));const i=we(...o,()=>{l(),Ee(i.listener)},s);return i},Oe=(e={})=>{const t={pos:[0,0],siz:[100,100],posAbs:m(),sizAbs:m(),scale:[1,1],disablePos:m(!1),disableSiz:m(!1),posChanged:me(),sizChanged:me(),posAbsChanged:me(),sizAbsChanged:me(),enablePosAbs:m(!1),enableSizAbs:m(!1)},n={tag:"div",isRect:!0,isSupp:!1,isCore:!0,oldVersions:[],init:me(),stop:me(),created:m(),removed:m(),inst:null,transitions:new Set,listeners:new Set,domEvents:[],data:new WeakMap([[Oe,{}]]),layout:t,tran:Ce,tranRef:Se,listen:ke,listenRef:Pe,unsafeTran:Me,unsafeTranRef:Te,addEvent:De,withInst:We,withDOM:Le,withPar:He},l={};if(e.data)if((s=e.data).constructor&&"WeakMap"==s.constructor.name)l.data=e.data;else{const t=p(e.data);l.data=new WeakMap(t.map(({key:e,val:t})=>[e,[t]]))}var s;e.layout&&(l.layout=c(t,e.layout));const o=c(n,e,l);return o.layout&&(o.layout=r(e=>e.isChan?e:T(e),o.layout)),o},Se=function(...e){const t=E(...e);return this.transitions.add(t.transition),t},Ce=function(...e){const{transition:t,node:n}=E(...e);return this.transitions.add(t),n},Te=function(...e){const t=O(...e);return this.transitions.add(t.transition),t},Me=function(...e){const{transition:t,node:n}=O(...e);return this.transitions.add(t),n},Pe=function(...e){const t=we(...e);return this.listeners.add(t.listener),t},ke=function(...e){const{listener:t,chan:n}=we(...e);return this.listeners.add(t),n},Re=e=>{const t=Oe(e);return t.isSupp=!0,t.isCore=!1,t},je=(e,t)=>(i(t,([l,s])=>{if("data"==l){p(t.data).forEach(({key:t,val:n})=>{if(e.data.has(t)){const n=e.data.get(t);e.data.set(n.concat(t))}else e.data.set(t,[n])})}else"layout"==l?e.layout=c(e.layout,r(e=>e.isChan?e:T(e),s)):e[l]&&n(e[l])?e[l]=c(e[l],s):e[l]=s}),e),$e=(e,t)=>({key:e,val:t}),Ne=e=>{const t=e.inst.dom;e.domEvents.forEach(({name:e})=>{t["on"+e]=null})},De=function(e,t){this.inst.dom["on"+e]=t,this.domEvents.push({name:e,func:t})},We=function(e){const t=this;Ae(t.init,()=>e(t.inst))},Le=function(e){const t=this;Ae(t.init,()=>e(t.inst.dom))},He=function(e){const t=this;Ae(t.init,()=>e(t.inst.par))},Ie=(e,t)=>W(Oe(e),t),Be=(e,t)=>W(Re(e),t),Ve=e=>t=>L(n=>e(n)?t(n):n),Fe=(e,t)=>(n,l)=>L(s=>e(s)?n(s):t(s)?l(s):s),Ye=Ve(e=>e.isCore),qe=Ve(e=>e.isSupp),Ge=Ve(e=>e.isTree),Je=e=>t=>W(e(t.elem),t.children),Ke=(e,t)=>(e.elem=t(e.elem),e),Qe=(e,t)=>Ke(e,e=>je(e,t)),Ue=(e,t,n,l)=>{const s=l.scale,o=e.pos,a=e.disablePos,i=e.posChanged,r=e.enablePosAbs;n.tran([o,s,a,r],()=>{if(!r.val)if(a.val){if("x"==a.val){const[e,n]=re(o.val),l=s.val,a=e[1]*l[1];t.style.top=0==a?n[1]+"px":`calc(${a}% + ${n[1]}px)`,i.put=!0}else if("y"==a.val){const[e,n]=re(o.val),l=s.val,a=e[0]*l[0];t.style.left=0==a?n[0]+"px":`calc(${a}% + ${n[0]}px)`,i.put=!0}}else{const[e,n]=re(o.val),l=s.val,a=[e[0]*l[0],e[1]*l[1]];0==a[0]?t.style.left=n[0]+"px":t.style.left=`calc(${a[0]}% + ${n[0]}px)`,0==a[1]?t.style.top=n[1]+"px":t.style.top=`calc(${a[1]}% + ${n[1]}px)`,i.put=!0}});const c=e.siz,d=e.disableSiz,u=e.sizChanged,h=e.enableSizAbs;n.tran([c,s,d,h],()=>{if(!h.val)if(d.val){if("x"==d.val){const[e,n]=re(c.val),l=s.val,o=e[1]*l[1];t.style.height=0==o?n[1]+"px":`calc(${o}% + ${n[1]}px)`,u.put=!0}else if("y"==d.val){const[e,n]=re(c.val),l=s.val,o=e[0]*l[0];t.style.width=0==o?n[0]+"px":`calc(${o}% + ${n[0]}px)`,u.put=!0}}else{const[e,n]=re(c.val),l=s.val,o=[e[0]*l[0],e[1]*l[1]];0==o[0]?t.style.width=n[0]+"px":t.style.width=`calc(${o[0]}% + ${n[0]}px)`,0==o[1]?t.style.height=n[1]+"px":t.style.height=`calc(${o[1]}% + ${n[1]}px)`,u.put=!0}})},Xe=(e,t,n,l,s,o,a,i,r,c,d,u)=>{e.tran([t,n,l,s,o,r,c],(t,n,l,s,o)=>{const[h,p]=re(t),[f,y]=re(n);let m=[o[0]*l[0]/100,o[1]*l[1]/100],b=[f[0]*m[0],f[1]*m[1]],g=[h[0]*m[0]+s[0],h[1]*m[1]+s[1]];a.val=v(g,p),r.val&&("x"==d.val?e.inst.dom.style.top=a.val[1]-s[1]+"px":"y"==d.val?e.inst.dom.style.left=a.val[0]-s[0]+"px":0==d.val&&(e.inst.dom.style.left=a.val[0]-s[0]+"px",e.inst.dom.style.top=a.val[1]-s[1]+"px")),i.val=v(b,y),c.val&&("x"==u.val?e.inst.dom.style.height=i.val[1]+"px":"y"==u.val?e.inst.dom.style.width=i.val[0]+"px":0==u.val&&(e.inst.dom.style.width=i.val[0]+"px",e.inst.dom.style.height=i.val[1]+"px")),e.layout.posAbsChanged.put=!0,e.layout.sizAbsChanged.put=!0})},Ze=e=>tt(U(Z(ye(nt(e))))),_e=(e,t)=>tt(U(Z(ye(lt(e,t))))),et=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],tt=e=>L(e,e=>(e.css&&i(e.css,([t,n])=>{const l=T(n),s=e.inst.dom;e.tran(l,e=>{s.style[t]=e})}),e)),nt=e=>{const t=m(et()),n={layout:{posAbs:m([0,0]),sizAbs:t,scale:m([1,1])},flex:!1,inst:{dom:document.body}};if(window.onresize){const e=window.onresize;window.onresize=()=>{const n=e();return t.val=n,n}}else window.onresize=()=>{const e=et();return t.val=e,e};return st(K(e),n)},lt=(e,t)=>{const n=m([t.offsetWidth,t.offsetHeight]),l={layout:{posAbs:m([0,0]),sizAbs:n,scale:m([1,1])},flex:!1,inst:{dom:t}};return rt(t),new ResizeObserver(e=>{const t=e[0],{width:l,height:s}=t.contentRect;n.val=[l,s]}).observe(t),st(K(e),l)},st=(e,t)=>{const n=e.elem,s=l(n.inst);if(s){it();const e=document.createElement(n.tag);rt(e),t.inst.dom.appendChild(e),n.inst={dom:e,par:t}}else n.recreated=!0,t.inst.dom.appendChild(n.inst.dom),n.inst.par=t,n.transitions.forEach(e=>{C(e)}),n.listeners.forEach(e=>{Ee(e)}),Ne(n);const o=n.layout;return Ue(o,n.inst.dom,n,t.layout),Xe(n,o.pos,o.siz,t.layout.scale,t.layout.posAbs,t.layout.sizAbs,o.posAbs,o.sizAbs,o.enablePosAbs,o.enableSizAbs,o.disablePos,o.disableSiz),s&&(n.oldVersions.forEach(e=>{e.inst=n.inst,e.init.put=!0,e.created.val=!0}),n.init.put=!0,n.created.val=!0),ot(e.children,n),e},ot=(e,t)=>{t.tran(e,()=>{let n=e.val,l=e.old;l||(l=[]),n||(n=[]);const s=l.filter(e=>!n.includes(e));n.filter(e=>!l.includes(e)).forEach(e=>{st(e,t)}),s.map(at)})},at=e=>{const t=e.elem;if(!t.recreated){const e=t.inst.dom;t.transitions.forEach(e=>{C(e)}),t.listeners.forEach(e=>{Ee(e)}),Ne(t),t.inst=null,t.stop.put=!0,t.removed.val=!0,t.created.val=!1,e.parentNode.removeChild(e)}e.children.val.map(at)},it=()=>{if(!document.getElementById("dabr-style")){const e=".dabr::-webkit-scrollbar {width: 0 !important;height: 0 !important;}.dabr {overflow: -moz-scrollbars-none;scrollbar-width: none;-ms-overflow-style: none;}",t=document.createElement("style");t.setAttribute("id","dabr-style"),t.textContent=e,document.head.append(t)}},rt=e=>{e.className="dabr",e.style.position="absolute",e.style["overflow-y"]="scroll",e.style["overflow-x"]="scroll"},ct=(e,t)=>{const n=m(),l=m(),s=$e(ct,{node:e,outter:!0,inner:!1}),o=t.elem,a=m(),i=Re({layout:{pos:o.layout.pos,siz:o.layout.siz,sizAbs:a},data:s}),r=je(o,{layout:{pos:n,siz:l},css:{overflow:"hidden"}});return A([e,a],()=>{const[t,s]=ut(e.val,a.val);n.val=[ee(t[0]),ee(t[1])],l.val=[ee(s[0]),ee(s[1])]}),W(i,W(r,t.children))},dt=e=>t=>ct(e,t),ut=(e,t)=>{let n=t[0],l=t[1],s=[0,0],o=[0,0],a=e[0]/e[1];return e[0]>e[1]?(s[0]=n,s[1]=s[0]/a,s[1]>l?(s[1]=l,s[0]=s[1]*a,o[1]=0,o[0]=(n-s[0])/2):(o[0]=0,o[1]=(l-s[1])/2)):(n=t[0],l=t[1],s[1]=l,s[0]=s[1]*a,s[0]>n?(s[0]=n,s[1]=s[0]/a,o[0]=0,o[1]=(l-s[1])/2):(o[1]=0,o[0]=(n-s[0])/2)),[o,s]},ht=e=>{const t=Oe(),n=t.layout.sizAbs,l=new Map,s=new Map,o=e=>{if(e.elem.inst){const t=e.elem.inst.dom,{top:n,left:s}=t.getBoundingClientRect();l.get(t).val=ce([s,n])}};A(n,()=>{const t=[];[...l].entries(([,e])=>{t.push(e)}),j(t,()=>{e.forEach(o)})});const a=new ResizeObserver(e=>{const t=[];[...s].entries(([,e])=>{t.push(e)}),j(t,()=>{e.forEach(e=>{const{width:t,height:n}=e.contentRect;0!=t&&0!=n&&(s.get(e.target).val=ce([t,n]))})})}),i=e.map(e=>{const t=e.elem,n=je(t,{layout:{disablePos:!0,disableSiz:!0}});return n.withDOM(t=>{l.set(t,n.layout.pos),s.set(t,n.layout.siz),setTimeout(()=>o(e),0),a.observe(t)}),W(n,e.children)});return W(t,i)},pt=e=>{const t=Oe(),n=new Map,l=new Map,s=new ResizeObserver(e=>{const t=[];[...l].entries(([,e])=>{t.push(e)}),j(t,()=>{e.forEach(e=>{const{width:t,height:n}=e.contentRect;0!=t&&0!=n&&(l.get(e.target).val=ce([t,n]))})})}),o=e.map(e=>{const t=e.elem,o=je(t,{layout:{disableSiz:!0}});return o.withDOM(e=>{n.set(e,o.layout.pos),l.set(e,o.layout.siz),s.observe(e)}),W(o,e.children)});return W(t,o)},ft=e=>{const t=Oe(),n=t.layout.sizAbs,l=new Map,s=new Map,o=e=>{if(e.elem.inst){const t=e.elem.inst.dom;if(l.has(t)){const{top:e,left:n}=t.getBoundingClientRect();l.get(t).val=ce([n,e])}}};A(n,()=>{const t=[];[...l].entries(([,e])=>{t.push(e)}),j(t,()=>{e.forEach(o)})});const a=e.map(e=>{const t=e.elem,n=je(t,{layout:{disablePos:!0}});return n.withDOM(t=>{l.set(t,n.layout.pos),s.set(t,n.layout.siz),setTimeout(()=>o(e),0)}),e.elem=n,e});return W(t,a)},vt=(e,t)=>{const n=t.elem,l=m(),s=m(),o=A(e,({color:e})=>e),a=A(e,({width:e})=>e);A([a],()=>{const e=a.val;s.val=[_(100,-2*e),_(100,-2*e)],l.val=[ee(e),ee(e)]});const i=Re({layout:{pos:n.layout.pos,siz:n.layout.siz},data:$e(vt,{node:e,outter:!0,inner:!1}),style:{color:o}});return W(i,W(je(n,{layout:{pos:l,siz:s},data:$e(vt,{node:e,inner:!0,outter:!1})}),t.children))},yt=e=>t=>vt(e,t),mt=(e,t)=>{const n=t.elem,l=(m(),m(),A(e,({color:e})=>e)),s=A(e,({width:e})=>e),o=A(s,n.layout.pos,(e,t)=>le(t,[ee(-e),ee(-e)])),a=A(s,n.layout.siz,(e,t)=>le(t,[ee(2*e),ee(2*e)])),i=Re({layout:{pos:o,siz:a},data:$e(vt,{node:e,outter:!0,inner:!1}),style:{color:l}});return W(i,W(je(n,{layout:{pos:A(s,e=>[ee(e),ee(e)]),siz:A(s,e=>[_(100,-2*e),_(100,-2*e)])},data:$e(vt,{node:e,inner:!0,outter:!1})}),t.children))},bt=e=>t=>mt(e,t),gt=(e,t)=>{const n=t.elem,l=A(e,({color:e})=>e),s=A(e,({width:e})=>e),o=A(s,n.layout.pos,(e,t)=>le(t,[ee(-e/2),ee(-e/2)])),a=A(s,n.layout.siz,(e,t)=>le(t,[ee(e),ee(e)])),i=A(s,e=>[ee(e),ee(e)]),r=A(s,e=>[_(100,-2*e),_(100,-2*e)]),c=Re({layout:{pos:o,siz:a},data:$e(vt,{node:e,outter:!0,inner:!1}),style:{color:l}});return W(c,W(je(n,{layout:{pos:i,siz:r},data:$e(vt,{node:e,inner:!0,outter:!1})}),t.children))},zt=e=>t=>gt(e,t),wt=(e,t)=>W(Re({layout:{pos:t.elem.layout.pos,siz:t.elem.layout.siz},data:$e(wt,e),style:{show:e}}),W(je(t.elem,{layout:{pos:[0,0],siz:[100,100]}}),t.children)),xt=e=>t=>wt(e,t),Et=(e,t)=>{const n=m([]),l=m([100,100]),s={};return A([e],e=>{const o=t[e];if(o)if(s[e])n.val.map(e=>{e.elem.style.show.val=!1}),s[e].elem.style.show.val=!0;else{n.val.map(e=>{e.elem.style.show.val=!1});const t=m(!0),l=wt(t,o());n.val=n.val.concat([l]),s[e]=l}l.val=[{rel:100,px:.01},100],l.val=[100,100]}),W(Re({layout:{pos:[0,0],siz:l}}),n)},At=e=>e,Ot=e=>e*e,St=e=>t=>Math.pow(t,e),Ct=e=>t=>1-e(t),Tt=(e,{finalVal:t,totalTime:n,timeFunction:l=At,delta:s=10})=>{const o=e.val;if(o){const a=e.info.get(Tt);if(!h(o,t)&&!a){e.info.set(Tt,!0);let a=Pt(o,t);if(-1!=a){const[t,i]=a,r=Rt(t),c=Rt(i),d=f(c,r,(e,t)=>e-t);let u=s;const h=setInterval(()=>{u>=n&&(e.info.set(Tt,!1),clearInterval(h),u=n);let a=v((i=d,c=l(u/n),i.map(e=>e*c)),r);var i,c;let p=kt(jt(a,t),o);e.val=p,u+=s},s);return{handle:h,node:e}}}}return null},Mt=({handle:e,node:t})=>{t.info.set(Tt,!1),clearInterval(e)},Pt=(s,o)=>{if(h(s,o))return-1;if("boolean"==typeof s)return[s,o];if(e(s)&&!e(o)&&!l(o)||e(o)&&!e(s)&&!l(s)||t(s)&&!t(o)&&!l(o)||t(o)&&!t(s)&&!l(s))return-1;if(n(s)&&(n(o)||l(o))||n(o)&&(n(s)||l(s))){let e=s||{},t=o||{},n=u(e),l=u({...e,...t});return Object.entries(l).forEach(([s])=>{if(h(e[s],t[s]))delete l[s],delete n[s];else{let o=Pt(e[s],t[s]);if(o&&-1!=o){let[e,t]=o;n[s]=e,l[s]=t}}}),[n,l]}if(e(s)&&(e(o)||l(o))||e(o)&&(e(s)||l(s))){var a=s,i=o;if(null==s&&(a=o.map(()=>null)),null==o&&(i=s.map(()=>null)),a.length==i.length){let e=d(a),t=d(i);for(let n=0;n<e.length;n++)if(h(a[n],i[n]))delete t[n],delete e[n];else{let l=Pt(a[n],i[n]);if(l&&-1!=l){let[s,o]=l;e[n]=s,t[n]=o}}return[e,t]}return[s,o]}return[s,o]},kt=(t,l)=>{if(n(t)){let e={};return Object.entries(l).forEach(([s])=>{o(t[s])?e[s]=kt(t[s],l[s]):n(l[s])?e[s]=u(l[s]):e[s]=l[s]}),e}if(e(t)){let e=[];if(t.length==l.length){for(let s=0;s<l.length;s++)o(t[s])?e[s]=kt(t[s],l[s]):n(l[s])?e[s]=u(l[s]):e[s]=l[s];return e}return null}return t},Rt=e=>{if(s(e))return[e];if((e=>e&&"object"==typeof e)(e)){let t=[];return Object.values(e).forEach(e=>{let n=Rt(e);n&&(t=t.concat(n))}),t}return null},jt=(t,l)=>function t(l,a){if(s(a))return l.shift();if(n(a)){let e={};return Object.entries(a).forEach(([n,s])=>{e[n]=t(l,s)}),e}if(e(a)){let e=[];for(var i=0;i<a.length;i++)o(a[i])?e[i]=t(l,a[i]):delete e[i];return e}return null}(d(t),l),$t=e=>{const t=e.elem,n=m(),l=je(t,{nodes:{scroll:n}}),s=m([50,0]);A([n],()=>{setTimeout(()=>{const e=95*n.val[1]/100;e>=0&&(s.val=[s.val[0],e])},0)});const o=m([0,0]),a=m([50,5]),i=me();xe([i],()=>{if(o.val){const e=i.get.offsetY;n.val=[0,e/o.val[1]*100]}}),xe([over],()=>{s.val=[0,s.val[1]],a.val=[100,5]});const r=W(Oe({layout:{pos:[_(100,-10),0],siz:[_(0,10),100],sizAbs:o},events:{click:i}}),Ie({layout:{pos:s,siz:a},style:{color:"orange"}}));return W(Re(),[W(l,e.children),r])},Nt=()=>{const e=m(location.hash.slice(1));return window.addEventListener("hashchange",()=>{"#"+e.val!=location.hash&&(e.val=location.hash.slice(1))},!1),A([e],()=>{location.hash=e.val}),e},Dt=e=>{const t=e.elem,n=(e=>(Ae([e.init],()=>{const t=e.inst.par,n=t.layout.sizAbs,l=t.layout.scale,s=e.layout.sizAbs,o=e.layout.scale;A([n,l,s],()=>{o.val=[n.val[0]/s.val[0]*l.val[0],n.val[1]/s.val[1]*l.val[1]]})}),e))(je(t,{layout:{disableSiz:!0},css:{height:"max-content",width:"max-content","font-size":"0px",position:"relative"}})),l=new ResizeObserver(e=>{const t=e[0],{width:l,height:s}=t.contentRect;0!=l&&0!=s&&(n.layout.siz.val=ce([l,s]))});n.withDOM(e=>{l.observe(e)});const s=A(e.children,e=>e.map(e=>Ke(e,e=>je(e,{layout:{enablePosAbs:!0,enableSizAbs:!0}}))));return W(n,s)},Wt=e=>{const t=e.elem,n=(e=>(Ae([e.init],()=>{const t=e.inst.par,n=t.layout.sizAbs,l=t.layout.scale,s=e.layout.sizAbs,o=e.layout.scale;A([n,l,s],()=>{o.val=[n.val[0]/s.val[0]*l.val[0],o.val[1]]})}),e))(je(t,{layout:{disableSiz:"x"},css:{width:"max-content","font-size":"0px",position:"relative"}})),l=new ResizeObserver(e=>{const t=e[0],{width:l,height:s}=t.contentRect;0!=l&&0!=s&&n.layout.siz.change(([e,t])=>[ee(l),t])});n.withDOM(e=>{l.observe(e)});const s=A(e.children,e=>e.map(e=>Ke(e,e=>je(e,{layout:{enablePosAbs:!0,enableSizAbs:!0}}))));return W(n,s)},Lt=e=>{const t=e.elem,n=(e=>(Ae([e.init],()=>{const t=e.inst.par,n=t.layout.sizAbs,l=t.layout.scale,s=e.layout.sizAbs,o=e.layout.scale;A([n,l,s],()=>{o.val=[o.val[0],n.val[1]/s.val[1]*l.val[1]]})}),e))(je(t,{layout:{disableSiz:"y"},css:{height:"max-content","font-size":"0px",position:"relative"}})),l=new ResizeObserver(e=>{const t=e[0],{width:l,height:s}=t.contentRect;0!=l&&0!=s&&n.layout.siz.change(([e,t])=>[e,ee(s)])});n.withDOM(e=>{l.observe(e)});const s=A(e.children,e=>e.map(e=>Ke(e,e=>je(e,{layout:{enablePosAbs:!0,enableSizAbs:!0}}))));return e.elem=n,e.children=s,e},Ht=(e,t)=>{let l,s;n(t)?(l=T(t.size),s=T(t.content)):(l=m("16px"),s=T(t));const o=Oe({inline:!0,tag:e,layout:{disablePos:!0,disableSiz:!0},css:{position:"relative",display:"inline",width:"max-content",height:"max-content","font-size":l}});return o.withDOM(e=>{A(s,t=>{e.innerText=t})}),W(o)},It=e=>Qe(e,{inline:!0}),Bt=e=>{const t=e.map(e=>Qe(e,{css:{display:e.elem.inline?"inline":"inline-block",position:"relative","vertical-align":"middle"}}));return Lt(ft(t))},Vt=e=>{const t=e.map(e=>Qe(e,{css:{display:e.elem.isText?"inline":"inline-block",position:"relative","vertical-align":"middle"}}));return Dt(ft(t))},Ft=e=>Re({layout:{siz:e}}),Yt=e=>Ft(A([e],e=>[0,e])),qt=e=>Ft(A([e],e=>[e,0])),Gt=e=>{const t=e.map(e=>W(je(e.elem,{css:{display:"block",position:"relative"}}),e.children));return Lt(ft(t))},Jt=Vt,Kt=(e,t)=>{const n=t.elem.style?t.elem.style.css:null;return W(je(t.elem,{style:{css:n?A(n,e,(e,t)=>({...e,...t})):e}}),t.children)},Qt=e=>t=>Kt(e,t),Ut=e=>{const t=T(e),n=document.createElement("img"),l=me(),s=Re({layout:{pos:[0,0],siz:[100,100]},css:{overflow:"-moz-hidden-unscrollable"},data:$e(Ut,{siz:l,dom:n})});return s.withDOM(e=>{A(t,t=>{n.setAttribute("src",t),n.style.width="auto",n.style.height="auto",n.addEventListener("load",()=>{const e=ce([n.offsetWidth,n.offsetHeight]);l.put=e,n.style.width="100%",n.style.height="100%"}),e.appendChild(n)})}),W(s)},Xt=e=>{const t=Ut(e),[{siz:n}]=t.elem.data.get(Ut),l=m();return xe(n,e=>{l.val=[e[0].px,e[1].px]}),ct(l,t)},Zt=e=>{let t,l,s,o,a;if(!e.isNode&&n(e)||e.isNode&&n(e.val)){const n=T(e);l=k(n,"content"),t=k(n,"fontSize"),s=k(n,"color"),o=k(n,"family"),a=k(n,"verticalAlign"),t.val||(t.val="16px"),s.val||(s.val="black"),o.val||(o.val="inherit"),a.val||(a.val="middle")}else l=T(e),t=m("16px"),s=m("black"),o=m("inherit"),a=m("middle");const i={content:l,size:t,color:s,family:o,verticalAlign:a};return Qe(Ht("div",{content:l,size:t}),{data:$e(Zt,i),layout:{disablePos:!0,disableSiz:!0},css:{position:"relative",display:"inline",color:s,"font-family":o,"vertical-align":a}})},_t=(e,t)=>{const n=Zt(e),l=Vt([n]),s=n.elem.data.get(Zt)[0],o=s.size,a=(e=>{const{family:t,content:n}=e;return A(t,n,(e,t)=>{const n=document.createElement("div");n.style.visibility="hidden",n.style.width="max-content",n.style["font-size"]="16px",e&&(n.style["font-family"]=e),n.innerText=t,document.body.appendChild(n);const l=n.offsetWidth,s=n.offsetHeight;return n.remove(),[l,s]})})(s),i=ct(a,W(t.elem,l));return A(t.elem.layout.sizAbs,a,([e],[t])=>{if(e>0){const l=(n=e/t*16,Math.round(1e3*(n+Number.EPSILON))/1e3);o.val=l+"px"}var n}),i},en=()=>{const e=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],t=m(e());if(window.onresize){const e=window.onresize;window.onresize=()=>{const n=e();return t.val=n,n}}else window.onresize=()=>{const n=e();return t.val=n,n};return t};export{Et as Cond,St as EXPONENTIAL,I as Entry,ht as External,ft as ExternalPos,pt as ExternalSiz,Ct as FLIP,Ut as Img,Ht as Inline,At as LINEAR,Ot as QUADRATIC,Oe as Rect,Ie as RectT,Re as Supp,Be as SuppT,Zt as Text,W as Tree,yt as _border,xt as _container,bt as _externalBorder,H as _mapT,G as _pathT,dt as _proportional,zt as _seamlessBorder,Qt as _style,Y as _walkT,Z as addChans,le as addCoord,Ue as addLayoutTriggers,te as addLen,ye as addNodes,U as addStyle,k as addSubNode,y as applyF,ce as asPx,vt as border,me as chan,Ve as cond,Fe as condElse,wt as container,de as copyCoord,ue as copyLen,Ye as core,Xe as defaultLayoutReactivity,N as endTransaction,mt as externalBorder,Xt as fitImg,_t as fitText,Dt as flex,Wt as flexX,Lt as flexY,K as fromStruc,oe as getPx,ae as getRel,Nt as hashNode,Jt as horizontal,qt as horizontalSpace,$e as keyed,_ as len,Vt as line,xe as listen,Ae as listenOnce,we as listenRef,L as mapT,se as mulCoord,ne as mulLen,m as node,R as nodeObj,Bt as paragraph,q as pathT,je as preserveR,Qe as preserveT,ct as proportional,ee as px,Ne as removeEvents,Ee as removeListen,at as removeRect,C as removeTran,Ze as run,_e as runDOM,nt as runRect,lt as runRectDOM,en as screenSize,$t as scrollbar,gt as seamlessBorder,Ft as space,re as splitCoord,$ as startTransaction,Mt as stopTimed,Kt as style,P as subNode,M as subNode1,qe as supp,Tt as timed,It as toInline,ie as toLen,T as toNode,J as toStruc,Je as top,A as tran,E as tranRef,j as transaction,Ge as tree,S as unsafeTran,O as unsafeTranRef,Gt as vertical,Yt as verticalSpace,F as walkT,Ke as withTree,he as x,pe as y};
