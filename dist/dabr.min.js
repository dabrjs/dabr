const t=t=>!!t&&t.constructor&&"Array"==t.constructor.name,e=e=>0==e&&!t(e)||!!e&&"object"!=typeof e&&e.constructor&&"Array"!=e.constructor.name,n=t=>!!t&&"object"==typeof t&&t.constructor&&"Array"!=t.constructor.name,o=t=>null==t||null==t,r=e=>0==e&&!t(e)||!!e&&"number"==typeof e,s=e=>0==e&&!t(e)||!!e,i=t=>!!t&&"function"==typeof t,a=(t,e)=>Object.entries(t).map(e),l=(t,e)=>(t=>{let e={};return t.forEach(([t,n])=>{e[t]=n}),e})(Object.entries(t).map(([t,n])=>{let o=e(n,t);return o?[t,o]:null}).filter(s)),c=(...t)=>Object.assign({},...t),u=t=>t.slice(),d=t=>Object.assign({},t),f=(t,e)=>{let n=[],o=[];return function t(e,r){var s;if(null==e&&null==r)return!0;if(null==e&&null==r)return!0;if(isNaN(e)&&isNaN(r)&&"number"==typeof e&&"number"==typeof r)return!0;if(e===r)return!0;if("function"==typeof e&&"function"==typeof r||e instanceof Date&&r instanceof Date||e instanceof RegExp&&r instanceof RegExp||e instanceof String&&r instanceof String||e instanceof Number&&r instanceof Number)return e.toString()===r.toString();if(!(e instanceof Object&&r instanceof Object))return!1;if(e.isPrototypeOf(r)||r.isPrototypeOf(e))return!1;if(e.constructor!==r.constructor)return!1;if(e.prototype!==r.prototype)return!1;if(n.indexOf(e)>-1||o.indexOf(r)>-1)return!1;for(s in r){if(r.hasOwnProperty(s)!==e.hasOwnProperty(s))return!1;if(typeof r[s]!=typeof e[s])return!1}for(s in e){if(r.hasOwnProperty(s)!==e.hasOwnProperty(s))return!1;if(typeof r[s]!=typeof e[s])return!1;switch(typeof e[s]){case"object":case"function":if(n.push(e),o.push(r),!t(e[s],r[s]))return!1;n.pop(),o.pop();break;default:if(e[s]!==r[s])return!1}}return!0}(t,e)},h=e=>t(e)?e:[e],p=(t,e,n)=>t.map((t,o)=>n(t,e[o])),v=(t,e)=>p(t,e,(t,e)=>t+e),y=t=>e=>t.reduce((t,e)=>e(t),e),m=(t=null,e=new WeakMap)=>b({val:t,old:null,trans:new Set,changed:!1,isNode:!0,info:e,change:z}),b=t=>new Proxy(t,{set:w,get:g}),g=(t,e)=>"target"==e?t:t[e],w=(t,e,n)=>"val"==e&&(t.changed||f(t.val,n)||(t.old=t.val,t.val=n,t.changed=!0,t.trans.forEach(e=>{e.func()&&t.trans.delete(e)}),t.changed=!1),!0),_=t=>t.map(t=>s(t.val)).reduce((t,e)=>t&&e,!0),z=function(t){this.val=t(this.val)},E=(...e)=>{const n=e.length,o=e[n-1];let r,s,a;i(o)?(r=o,s=null,a=1):(r=e[n-2],s=o,a=2);const l=e.splice(0,n-a).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e));if(l.length>0){const t=r.length,e=[];for(let n=0;n<t;n++)e.push(l[n]);const n=m(),o=()=>{_(l)&&(n.val=r(...e.map(t=>t.val)))},i={nodes:l,func:o,ref:s};return l.forEach(t=>{const e=t.target.trans;if(!e.has(i))if(s){const t=[...e].find(t=>t.ref==s);t?(M(t),e.add(i)):e.add(i)}else e.has(i)||e.add(i)}),_(l)&&o(),{node:n,transition:i}}return null},O=(...t)=>{const{node:e}=E(...t);return e},A=(...e)=>{const n=e.length,o=e[n-1];let r,s;i(o)?(r=o,s=null):(r=e[n-2],s=o);const a=e.splice(0,n-1).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e));if(a.length>0){const t=r.length,e=[];for(let n=0;n<t;n++)e.push(a[n]);const n=m(),o=()=>{n.val=r(...e.map(t=>t.val))},i={nodes:a,func:o,ref:s};return a.forEach(t=>{const e=t.target.trans;if(!e.has(i))if(s){const t=[...e].find(t=>t.ref==s);t?(M(t),e.add(i)):e.add(i)}else e.has(i)||e.add(i)}),o(),{node:n,transition:i}}return null},x=(...t)=>{const{node:e}=A(...t);return e},M=t=>{t.nodes.forEach(e=>{e.target.trans.delete(t)})},T=t=>t.isNode?t:m(t),S=(t,e)=>O([t],t=>t[e]),k=(e,n)=>{const o=x(e,t=>t?t[n]:null);return x(o,()=>{const r=e.val;if(r&&"object"==typeof r){const s=t(r)?u(r):d(r);s[n]=o.val,e.val=s}else if(o.val){const t={};t[n]=o.val,e.val=t}}),o},C=(e,n)=>{let o,r;t(n)?[o,r]=n:(o=n,r=n);const s=k(e,r);return e.target[o]=s,s},j=t=>{const e=m(t);if("object"==typeof t){new Set(Object.keys(t)).forEach(t=>{C(e,t)})}return e},R=(e,...n)=>{const o=n.map(e=>e?e.isNode?t(e.val)?e:O(e,h):e.isEntry?e:T(h(e)):m([]));return{isTree:!0,elem:e,children:0==o.length?m([]):1==o.length?o[0]:O(o,()=>o.map(t=>t.val).reduce((t,e)=>t.concat(e)))}},L=R,N=(t,e,n=[])=>R(e(t.elem,t,n),t.children.isEntry?t.children:O(t.children,t=>t.map((t,o)=>N(t,e,n.concat(o))))),P=(t,e=[])=>n=>N(n,t,e),D={isEntry:!0},W=(t,e)=>(t.children.isEntry?t.children=e:t.children=O(t.children,t=>t.map(t=>W(t,e))),t),H=(t,e)=>{let n;return n=t.children==e?D:O(t.children,t=>t.map(t=>H(t,e))),R(t.elem,n)},V=(e,n,o=null,r=[])=>{const s=n(e,o,r),i=t(s),a=i?s[0]:s,l=i?s[1]:o,c=a?H(a,e.children):null,u=O(e.children,t=>t.map((t,e)=>V(t,n,l,r.concat(e))));return a?W(c,u):null},I=(t,e=null,n=[])=>o=>V(o,t,e,n),$=(t,e)=>{let n=null;return V(t,(t,o,r)=>{f(r,e)&&(n=t)}),n},Y=t=>e=>$(e,t),q=t=>N(t,t=>R(t,D)),B=t=>{const e=t.elem;return e.isTree?B(W(e,t.children)):(t.children=O(t.children,t=>t.map(B)),t)},F={color:({elem:t,node:e})=>()=>{t.style["background-color"]=e.val},show:({elem:t,node:e})=>()=>{e.val?t.style.display="block":t.style.display="none"}};var G=t=>N(t,t=>(t.style&&a(t.style,([e,n])=>{const o=T(n),r=F[e];if(r){const e=r({node:o,elem:t.inst.dom,rect:t});t.tran(o,e)}}),t));const J={click:({rect:t,channel:e})=>{t.addEvent("click",t=>{e.put=t})},mouseOver:({rect:t,channel:e})=>{t.addEvent("mouseover",t=>{e.put=t})},mouseEnter:({rect:t,channel:e})=>{t.addEvent("mouseenter",t=>{e.put=t})},mouseMove:({rect:t,channel:e})=>{t.addEvent("mousemove",t=>{e.put=t})},drag:({rect:t,channel:e})=>{let n=!1;t.addEvent("mousedown",t=>{n=!0,e.put=t}),t.addEvent("mouseup",()=>{n=!1,e.put=!1}),t.addEvent("mousemove",t=>{n&&(e.put=t)})},mouseOut:({rect:t,channel:e})=>{t.addEvent("mouseout",t=>{e.put=t})}};var K=t=>N(t,t=>(t.events&&a(t.events,([e,n])=>{if(n.isChan){const o=J[e];o&&o({channel:n,elem:t.inst.dom,rect:t})}}),t));const Q=(t,e)=>({rel:t,px:e}),U=t=>Q(0,t),X=(t,e)=>{const n=s(t.rel)?t:{px:0,rel:t},o=s(e.rel)?e:{px:0,rel:e};return Q(n.rel+o.rel,n.px+o.px)},Z=(t,e)=>{const n=s(e.rel)?e:{px:0,rel:e};return Q(n.rel*t,n.px*t)},tt=(t,e)=>[X(t[0],e[0]),X(t[1],e[1])],et=(t,e)=>[Z(t,e[0]),Z(t,e[1])],nt=t=>s(t.px)?t.px:0,ot=t=>s(t.rel)?t.rel:t,rt=t=>Q(ot(t),nt(t)),st=([t,e])=>[[ot(t),ot(e)],[nt(t),nt(e)]],it=([t,e])=>[U(t),U(e)],at=([t,e])=>[lt(t),lt(e)],lt=t=>t.rel?d(t):t,ct=t=>dt([t,100]),ut=t=>dt([100,t]),dt=t=>{const e=t.isNode?t:m(t);return C(e,"0"),C(e,["x","0"]),C(e,"1"),C(e,["y","1"]),e},ft={},ht={fullSize:({rect:t,tree:e,node:n})=>{t.tran([e.children],()=>{const t=e.children.val.map(t=>{const e=t.elem.layout;return O(e.posAbs,e.sizAbs,()=>[v(e.posAbs.val,e.sizAbs.val),tt(e.pos.val,e.siz.val)])});O(t,()=>{const e=at(t.map(t=>t.val).reduce((t,e)=>{const[n,o]=t,[r,s]=e,[i,a]=n,[l,c]=o,[u,d]=r,[f,h]=s;return[[i>u?i:u,a>d?a:d],[i>u?l:f,a>d?c:h]]})[1]);n.val=e})})},fullSizeCor:({rect:t,node:e})=>{const n=m(),o=t.layout.sizAbs,r=t.layout.scale,s=t.inst.par.layout.sizAbs;t.tran([n,o,s,r],()=>{const[[t,i],[a,l]]=st(n.val),[c,u]=o.val,[d,f]=s.val;e.val=[Q(t*c/d*r.val[0],a),Q(i*u/f*r.val[1],l)]})},scrollAbs:({elem:t,rect:e,node:n})=>{e.addEvent("scroll",()=>{n.val=[t.scrollLeft,t.scrollTop]}),e.tran([n],()=>{const[e,o]=n.val;t.scrollLeft=e,t.scrollTop=o})},id:({elem:t,rect:e,node:n})=>{e.unsafeTran(n,e=>{e&&t.setAttribute("id",e)})},scroll:({elem:t,rect:e,node:n})=>{const o=e.tran([e.layout.sizAbs],e=>{const n=t.scrollWidth,o=t.scrollHeight,r=Math.round(e[0]),s=Math.round(e[1]);return[n-r>=0?n-r:0,o-s>=0?o-s:0]});e.addEvent("scroll",()=>{const e=o.val;n.val=[0===e[0]?0:t.scrollLeft/e[0]*100,0===e[1]?0:t.scrollTop/e[1]*100]}),e.tran([n],()=>{const[e,r]=n.val,s=o.val,i=[Math.round(e/100*s[0]),Math.round(r/100*s[1])];t.scrollLeft!=i[0]&&(t.scrollLeft=i[0]),t.scrollTop!=i[1]&&(t.scrollTop=i[1])},ft)}};var pt=t=>N(t,(t,e)=>(t.nodes&&a(t.nodes,([n,o])=>{const r="fullSize"==n?o:T(o),s=ht[n];s&&s({node:r,elem:t.inst.dom,rect:t,tree:e})}),t));const vt=(t,e)=>yt({get:t,ports:new Set,isChan:!0,info:e}),yt=t=>new Proxy(t,{get:mt,set:bt}),mt=(t,e)=>"target"==e?t:t[e],bt=(t,e,n)=>"put"==e&&(t.get=n,t.ports.forEach(t=>{t.func()}),!0),gt=(...e)=>{const n=e.length,o=e[n-1];let r,s,a;i(o)?(r=o,s=null,a=1):(r=e[n-2],s=o,a=2);const l=e.splice(0,n-a).map(e=>t(e)?e:[e]).reduce((t,e)=>t.concat(e));if(l.length>0){const t=r.length,e=[];for(let n=0;n<t;n++)e.push(l[n]);const n=vt(),o={chans:l,func:()=>{const t=r(...e.map(t=>t.get));t&&(n.put=t)},ref:s};return l.forEach(t=>{const e=t.target.ports;if(!e.has(o))if(s){const t=[...e].find(t=>t.ref==s);t?(_t(t),e.add(o)):e.add(o)}else e.has(o)||e.add(o)}),{chan:n,listener:o}}return null},wt=(...t)=>{const{chan:e}=gt(...t);return e},_t=t=>{t.chans.forEach(e=>{e.target.ports.delete(t)})},zt=(...t)=>{const e=t.length,n=t[e-1];let o,r,s;i(n)?(o=n,r=null,s=t.splice(0,e-1)):(o=t[e-2],r=n,s=t.splice(0,e-2));const a=gt(...s,()=>{o(),_t(a.listener)},r);return a},Et=(t={})=>{const e={pos:dt([0,0]),siz:dt([100,100]),posAbs:m(),sizAbs:m(),scale:dt([1,1]),disablePos:m(!1),disableSiz:m(!1),posChanged:vt(),sizChanged:vt(),posAbsChanged:vt(),sizAbsChanged:vt()},n={isRect:!0,isSupp:!1,isCore:!0,oldVersions:[],init:vt(),stop:vt(),created:m(),removed:m(),inst:null,transitions:new Set,listeners:new Set,domEvents:[],data:new WeakMap([[Et,{}]]),layout:e,tran:At,tranRef:Ot,listen:St,listenRef:Tt,unsafeTran:Mt,unsafeTranRef:xt,addEvent:Lt,withInst:Nt,withDOM:Pt,withPar:Dt},o={};if(t.data)if((r=t.data).constructor&&"WeakMap"==r.constructor.name)o.data=t.data;else{const e=h(t.data);o.data=new WeakMap(e.map(({key:t,val:e})=>[t,[e]]))}var r;t.layout&&(o.layout=c(e,t.layout));const s=c(n,t,o);var i,a;return s.layout&&(s.layout=(i=t=>t.isChan?t:T(t),a=s.layout,l(a,i))),s},Ot=function(...t){const e=E(...t);return this.transitions.add(e.transition),e},At=function(...t){const{transition:e,node:n}=E(...t);return this.transitions.add(e),n},xt=function(...t){const e=A(...t);return this.transitions.add(e.transition),e},Mt=function(...t){const{transition:e,node:n}=A(...t);return this.transitions.add(e),n},Tt=function(...t){const e=gt(...t);return this.listeners.add(e.listener),e},St=function(...t){const{listener:e,chan:n}=gt(...t);return this.listeners.add(e),n},kt=t=>{const e=Et(t);return e.isSupp=!0,e.isCore=!1,e},Ct=(t,e)=>{const o={};if(a(e,([e,r])=>{t[e]&&n(t[e])?o[e]=c(t[e],r):o[e]=r}),e.data){const n=h(e.data);o.data=t.data,n.forEach(({key:t,val:e})=>{if(o.data.has(t)){const e=o.data.get(t);o.data.set(e.concat(t))}else o.data.set(t,[e])})}return o.inst=null,o.init=vt(),o.created=m(),o.oldVersions=t.oldVersions.concat([t]),Et(c(t,o))},jt=(t,e)=>({key:t,val:e}),Rt=t=>{const e=t.inst.dom;t.domEvents.forEach(({name:t})=>{e["on"+t]=null})},Lt=function(t,e){this.inst.dom["on"+t]=e,this.domEvents.push({name:t,func:e})},Nt=function(t){const e=this;zt(e.init,()=>t(e.inst))},Pt=function(t){const e=this;zt(e.init,()=>t(e.inst.dom))},Dt=function(t){const e=this;zt(e.init,()=>t(e.inst.par))},Wt=(t,e)=>R(Et(t),e),Ht=(t,e)=>R(kt(t),e),Vt=t=>e=>N(n=>t(n)?e(n):n),It=(t,e)=>(n,o)=>N(r=>t(r)?n(r):e(r)?o(r):r),$t=Vt(t=>t.isCore),Yt=Vt(t=>t.isSupp),qt=Vt(t=>t.isTree),Bt=t=>e=>R(t(e.elem),e.children),Ft=(t,e,n,o)=>{const r=dt(o.scale),s=dt(t.pos),i=t.disablePos,a=t.posChanged;n.tran([s,r,i],()=>{if(!i.val){const[t,n]=st(s.val),o=r.val;e.style.left=`calc(${t[0]*o[0]}% + ${n[0]}px)`,e.style.top=`calc(${t[1]*o[1]}% + ${n[1]}px)`,a.put=!0}});const l=dt(t.siz),c=t.disableSiz,u=t.sizChanged;n.tran([l,r,c],()=>{if(!c.val){const[t,n]=st(l.val),o=r.val;e.style.width=`calc(${t[0]*o[0]}% + ${n[0]}px)`,e.style.height=`calc(${t[1]*o[1]}% + ${n[1]}px)`,u.put=!0}})},Gt=(t,e,n,o,r,s,i,a)=>{t.tran([e,n,o,r,s].map(dt),(e,n,o,r,s)=>{const[l,c]=st(e),[u,d]=st(n);let f=[s[0]*o[0]/100,s[1]*o[1]/100],h=[u[0]*f[0],u[1]*f[1]],p=[l[0]*f[0]+r[0],l[1]*f[1]+r[1]];i.val=v(p,c),a.val=v(h,d),t.layout.posAbsChanged.put=!0,t.layout.sizAbsChanged.put=!0})};var Jt=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,o){return t[0]===e&&(n=o,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),o=this.__entries__[n];return o&&o[1]},e.prototype.set=function(e,n){var o=t(this.__entries__,e);~o?this.__entries__[o][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,o=t(n,e);~o&&n.splice(o,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,o=this.__entries__;n<o.length;n++){var r=o[n];t.call(e,r[1],r[0])}},e}()}(),Kt="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Qt="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Ut="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Qt):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var Xt=["top","right","bottom","left","width","height","size","weight"],Zt="undefined"!=typeof MutationObserver,te=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,o=!1,r=0;function s(){n&&(n=!1,t()),o&&a()}function i(){Ut(s)}function a(){var t=Date.now();if(n){if(t-r<2)return;o=!0}else n=!0,o=!1,setTimeout(i,e);r=t}return a}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){Kt&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Zt?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){Kt&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;Xt.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),ee=function(t,e){for(var n=0,o=Object.keys(e);n<o.length;n++){var r=o[n];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},ne=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||Qt},oe=ce(0,0,0,0);function re(t){return parseFloat(t)||0}function se(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+re(t["border-"+n+"-width"])}),0)}function ie(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return oe;var o=ne(t).getComputedStyle(t),r=function(t){for(var e={},n=0,o=["top","right","bottom","left"];n<o.length;n++){var r=o[n],s=t["padding-"+r];e[r]=re(s)}return e}(o),s=r.left+r.right,i=r.top+r.bottom,a=re(o.width),l=re(o.height);if("border-box"===o.boxSizing&&(Math.round(a+s)!==e&&(a-=se(o,"left","right")+s),Math.round(l+i)!==n&&(l-=se(o,"top","bottom")+i)),!function(t){return t===ne(t).document.documentElement}(t)){var c=Math.round(a+s)-e,u=Math.round(l+i)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(u)&&(l-=u)}return ce(r.left,r.top,a,l)}var ae="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof ne(t).SVGGraphicsElement}:function(t){return t instanceof ne(t).SVGElement&&"function"==typeof t.getBBox};function le(t){return Kt?ae(t)?function(t){var e=t.getBBox();return ce(0,0,e.width,e.height)}(t):ie(t):oe}function ce(t,e,n,o){return{x:t,y:e,width:n,height:o}}var ue=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ce(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=le(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),de=function(t,e){var n=function(t){var e=t.x,n=t.y,o=t.width,r=t.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,i=Object.create(s.prototype);return ee(i,{x:e,y:n,width:o,height:r,top:n,right:e+o,bottom:r+n,left:e}),i}(e);ee(this,{target:t,contentRect:n})},fe=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new Jt,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof ne(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new ue(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof ne(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new de(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),he="undefined"!=typeof WeakMap?new WeakMap:new Jt,pe=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=te.getInstance(),o=new fe(e,n,this);he.set(this,o)};["observe","unobserve","disconnect"].forEach((function(t){pe.prototype[t]=function(){var e;return(e=he.get(this))[t].apply(e,arguments)}}));var ve=void 0!==Qt.ResizeObserver?Qt.ResizeObserver:pe;const ye=t=>ge(G(K(pt(we(t))))),me=(t,e)=>ge(G(K(pt(_e(t,e))))),be=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],ge=t=>N(t,t=>(t.css&&a(t.css,([e,n])=>{const o=T(n),r=t.inst.dom;t.tran(o,t=>{r.style[e]=t})}),t)),we=t=>{const e=m(be()),n={layout:{posAbs:m([0,0]),sizAbs:e,scale:m([1,1])},flex:!1,inst:{dom:document.body}};if(window.onresize){const t=window.onresize;window.onresize=()=>{const n=t();return e.val=n,n}}else window.onresize=()=>{const t=be();return e.val=t,t};return ze(B(t),n)},_e=(t,e)=>{const n=m([e.offsetWidth,e.offsetHeight]),o={layout:{posAbs:m([0,0]),sizAbs:n,scale:m([1,1])},flex:!1,inst:{dom:e}};return xe(e),new ve(t=>{const e=t[0],{width:o,height:r}=e.contentRect;n.val=[o,r]}).observe(e),ze(B(t),o)},ze=(t,e)=>{const n=t.elem;Ae();const o=document.createElement("div");xe(o),e.inst.dom.appendChild(o),n.inst={dom:o,par:e};const r=n.layout;return Ft(r,o,n,e.layout),Gt(n,r.pos,r.siz,e.layout.scale,e.layout.posAbs,e.layout.sizAbs,r.posAbs,r.sizAbs),n.oldVersions.forEach(t=>{t.inst=n.inst,t.init.put=!0,t.created.val=!0}),n.init.put=!0,n.created.val=!0,Ee(t.children,n),t},Ee=(t,e)=>{e.tran(t,()=>{let n=t.val,o=t.old;o||(o=[]),n||(n=[]);const r=o.filter(t=>!n.includes(t));n.filter(t=>!o.includes(t)).forEach(t=>ze(t,e)),r.forEach(t=>Oe(t))})},Oe=t=>{const e=t.elem,n=e.inst.dom;return n.parentNode.removeChild(n),e.transitions.forEach(t=>{M(t)}),e.listeners.forEach(t=>{_t(t)}),Rt(e),e.inst=null,e.stop.put=!0,e.removed.val=!0,e.created.val=!1,t.children.val=t.children.val.map(Oe),t},Ae=()=>{if(!document.getElementById("dabr-style")){const t=".dabr::-webkit-scrollbar {width: 0 !important;height: 0 !important;}.dabr {overflow: -moz-scrollbars-none;scrollbar-width: none;-ms-overflow-style: none;}",e=document.createElement("style");e.setAttribute("id","dabr-style"),e.textContent=t,document.head.append(e)}},xe=t=>{t.className="dabr",t.style.position="absolute",t.style["overflow-y"]="scroll",t.style["overflow-x"]="scroll"},Me=(t,e)=>{const n=e.elem,o=m(),r=m(),s=O(t,({color:t})=>t),i=O(t,({width:t})=>t);O([i],()=>{const t=i.val;r.val=[Q(100,-2*t),Q(100,-2*t)],o.val=[U(t),U(t)]});const a=kt({layout:{pos:n.layout.pos,siz:n.layout.siz},data:jt(Me,{node:t,outter:!0,inner:!1}),style:{color:s}});return R(a,R(Ct(n,{layout:{pos:o,siz:r},data:jt(Me,{node:t,inner:!0,outter:!1})}),e.children))},Te=t=>e=>Me(t,e),Se=(t,e)=>R(kt({layout:{pos:e.elem.layout.pos,siz:e.elem.layout.siz},data:jt(Se,t),style:{show:t}}),R(Ct(e.elem,{layout:{pos:[0,0],siz:[100,100]}}),e.children)),ke=t=>e=>Se(t,e),Ce=(t,e)=>{const n=m(),o=m(),r=jt(Ce,{node:t,outter:!0,inner:!1}),s=e.elem,i=m(),a=kt({layout:{pos:s.layout.pos,siz:s.layout.siz,sizAbs:i},data:r}),l=Ct(s,{layout:{pos:n,siz:o}});return O([t,i],()=>{const[e,r]=Re(t.val,i.val);n.val=[U(e[0]),U(e[1])],o.val=[U(r[0]),U(r[1])]}),R(a,R(l,e.children))},je=t=>e=>Ce(t,e),Re=(t,e)=>{let n=e[0],o=e[1],r=[0,0],s=[0,0],i=t[0]/t[1];return t[0]>t[1]?(r[0]=n,r[1]=r[0]/i,r[1]>o?(r[1]=o,r[0]=r[1]*i,s[1]=0,s[0]=(n-r[0])/2):(s[0]=0,s[1]=(o-r[1])/2)):(n=e[0],o=e[1],r[1]=o,r[0]=r[1]*i,r[0]>n?(r[0]=n,r[1]=r[0]/i,s[0]=0,s[1]=(o-r[1])/2):(s[1]=0,s[0]=(n-r[0])/2)),[s,r]},Le=(t,e)=>{const n=m(),o=l(e,t=>{const e=!!t.destroy&&t.destroy,n=m(!1);return{show:n,rectT:Se(n,t.content||t),destroy:e}}),r=m([100,100]);return O([t],()=>{const e=t.val;n.val=a(o,([t,n])=>{const{show:o,rectT:r,destroy:s}=n;return t==e?(o.val=!0,r):s?null:(o.val=!1,r)}).filter(s),r.val=[{rel:100,px:.01},100],r.val=[100,100]}),R(kt({layout:{pos:[0,0],siz:r}}),n)},Ne=t=>t,Pe=t=>t*t,De=t=>e=>Math.pow(e,t),We=t=>e=>1-t(e),He=(t,{finalVal:e,totalTime:n,timeFunction:o=Ne,delta:r=10})=>{const s=t.val;if(s){const i=t.info.get(He);if(!f(s,e)&&!i){t.info.set(He,!0);let i=Ie(s,e);if(-1!=i){const[e,a]=i,l=Ye(e),c=Ye(a),u=p(c,l,(t,e)=>t-e);let d=r;const f=setInterval(()=>{d>=n&&(t.info.set(He,!1),clearInterval(f),d=n);let i=v((a=u,c=o(d/n),a.map(t=>t*c)),l);var a,c;let h=$e(qe(i,e),s);t.val=h,d+=r},r);return{handle:f,node:t}}}}return null},Ve=({handle:t,node:e})=>{e.info.set(He,!1),clearInterval(t)},Ie=(r,s)=>{if(f(r,s))return-1;if("boolean"==typeof r)return[r,s];if(t(r)&&!t(s)&&!o(s)||t(s)&&!t(r)&&!o(r)||e(r)&&!e(s)&&!o(s)||e(s)&&!e(r)&&!o(r))return-1;if(n(r)&&(n(s)||o(s))||n(s)&&(n(r)||o(r))){let t=r||{},e=s||{},n=d(t),o=d({...t,...e});return Object.entries(o).forEach(([r])=>{if(f(t[r],e[r]))delete o[r],delete n[r];else{let s=Ie(t[r],e[r]);if(s&&-1!=s){let[t,e]=s;n[r]=t,o[r]=e}}}),[n,o]}if(t(r)&&(t(s)||o(s))||t(s)&&(t(r)||o(r))){var i=r,a=s;if(null==r&&(i=s.map(()=>null)),null==s&&(a=r.map(()=>null)),i.length==a.length){let t=u(i),e=u(a);for(let n=0;n<t.length;n++)if(f(i[n],a[n]))delete e[n],delete t[n];else{let o=Ie(i[n],a[n]);if(o&&-1!=o){let[r,s]=o;t[n]=r,e[n]=s}}return[t,e]}return[r,s]}return[r,s]},$e=(e,o)=>{if(n(e)){let t={};return Object.entries(o).forEach(([r])=>{s(e[r])?t[r]=$e(e[r],o[r]):n(o[r])?t[r]=d(o[r]):t[r]=o[r]}),t}if(t(e)){let t=[];if(e.length==o.length){for(let r=0;r<o.length;r++)s(e[r])?t[r]=$e(e[r],o[r]):n(o[r])?t[r]=d(o[r]):t[r]=o[r];return t}return null}return e},Ye=t=>{if(r(t))return[t];if((t=>t&&"object"==typeof t)(t)){let e=[];return Object.values(t).forEach(t=>{let n=Ye(t);n&&(e=e.concat(n))}),e}return null},qe=(e,o)=>function e(o,i){if(r(i))return o.shift();if(n(i)){let t={};return Object.entries(i).forEach(([n,r])=>{t[n]=e(o,r)}),t}if(t(i)){let t=[];for(var a=0;a<i.length;a++)s(i[a])?t[a]=e(o,i[a]):delete t[a];return t}return null}(u(e),o),Be=t=>{const e=t.elem,n=m(),o=Ct(e,{nodes:{scroll:n}}),r=m([50,0]);O([n],()=>{setTimeout(()=>{const t=95*n.val[1]/100;t>=0&&(r.val=[r.val[0],t])},0)});const s=m([0,0]),i=vt(),a=vt(),l=vt();let c=!1;const u=m([50,5]);let d=null;const f=vt();wt([f],()=>{if(s.val){const t=f.get.offsetY;n.val=[0,t/s.val[1]*100]}}),wt([i],()=>{const t=i.get;if(!(d&&d.clientY-t.clientY<d.layerY-t.layerY))if(0==t)c=!1,r.val=[50,r.val[1]],u.val=[50,5];else{c=!0,r.val=[0,r.val[1]],u.val=[100,5];let e=t.layerY/s.val[1]*100;e<1&&(e=1),e>100&&(e=100),d=t,He(n,{finalVal:[0,e],totalTime:100})}}),wt([a],()=>{c||(r.val=[0,r.val[1]],u.val=[100,5])}),wt([l],()=>{c||(r.val=[50,r.val[1]],u.val=[50,5])});const h=R(Et({layout:{pos:[Q(100,-10),0],siz:[Q(0,10),100],sizAbs:s},events:{click:f,drag:i}}),Wt({layout:{pos:r,siz:u},style:{color:"orange"}}));return R(kt(),[R(o,t.children),h])},Fe=()=>{const t=m(location.hash.slice(1));return window.addEventListener("hashchange",()=>{"#"+t.val!=location.hash&&(t.val=location.hash.slice(1))},!1),O([t],()=>{location.hash=t.val}),t},Ge=t=>(t.reduce((t,e)=>(dt(t.elem.layout.pos),dt(t.elem.layout.siz),dt(e.elem.layout.pos),dt(e.elem.layout.siz),O([t.elem.layout.pos.y,t.elem.layout.siz.y],(t,n)=>{e.elem.layout.pos.y.val=X(t,n)}),e),Wt({layout:{pos:[0,0],siz:[0,0]}})),t),Je=t=>(t.reduce((t,e)=>(dt(t.elem.layout.pos),dt(t.elem.layout.siz),dt(e.elem.layout.pos),dt(e.elem.layout.siz),O([t.elem.layout.pos.x,t.elem.layout.siz.x],(t,n)=>{e.elem.layout.pos.x.val=X(t,n)}),e),Wt({layout:{pos:[0,0],siz:[0,0]}})),t),Ke=t=>kt({layout:{siz:t}}),Qe=t=>Ke(O([t],t=>[0,t])),Ue=t=>Ke(O([t],t=>[t,0])),Xe=t=>{const e=m([100,100]);return t.withDOM(t=>{t.style.overflow="hidden"}),(t=>(zt([t.init],()=>{const e=t.inst.par,n=e.layout.sizAbs,o=e.layout.scale,r=t.layout.sizAbs,s=t.layout.scale;O([n,o,r],()=>{s.val=[n.val[0]/r.val[0]*o.val[0],n.val[1]/r.val[1]*o.val[1]]})}),t))(Ct(t,{layout:{siz:e},nodes:{fullSize:e}}))},Ze=t=>{const e=m([100,100]),n=O([e,t.layout.siz],([t],[,e])=>[t,e]);return t.withDOM(t=>{t.style.overflow="hidden"}),(t=>(zt([t.init],()=>{const e=t.inst.par,n=e.layout.sizAbs,o=e.layout.scale,r=t.layout.sizAbs,s=t.layout.scale;O([n,o,r],()=>{s.val=[n.val[0]/r.val[0]*o.val[0],s.val[1]]})}),t))(Ct(t,{layout:{siz:n},nodes:{fullSize:e}}))},tn=t=>{const e=m([100,100]),n=O([e,t.layout.siz],([,t],[e])=>[e,t]);return t.withDOM(t=>{t.style.overflow="hidden"}),(t=>(zt([t.init],()=>{const e=t.inst.par,n=e.layout.sizAbs,o=e.layout.scale,r=t.layout.sizAbs,s=t.layout.scale;O([n,o,r],()=>{s.val=[s.val[0],n.val[1]/r.val[1]*o.val[1]]})}),t))(Ct(t,{layout:{siz:n},nodes:{fullSize:e}}))},en=(t,e)=>{const n=e.elem.style?e.elem.style.css:null;return R(Ct(e.elem,{style:{css:n?O(n,t,(t,e)=>({...t,...e})):t}}),e.children)},nn=t=>e=>en(t,e),on=t=>{let e,o,r,s,i;if(!t.isNode&&n(t)||t.isNode&&n(t.val)){const n=T(t);o=C(n,"content"),e=C(n,"fontSize"),r=C(n,"color"),s=C(n,"family"),i=C(n,"verticalAlign"),e.val||(e.val="16px"),r.val||(r.val="black"),s.val||(s.val="inherit"),i.val||(i.val="middle")}else o=T(t),e=m("16px"),r=m("black"),s=m("inherit"),i=m("middle");const a={content:o,size:e,color:r,family:s,verticalAlign:i},l=kt({text:a,data:jt(on,a),layout:{disablePos:!0,disableSiz:!0},css:{position:"relative",display:"inline","font-size":e,color:r,"font-family":s,"vertical-align":i}});return l.withInst(t=>{const n=t.dom,a=l.layout,c=()=>{setTimeout(()=>{a.pos.val=it([n.offsetLeft,n.offsetTop]),a.siz.val=it([n.offsetWidth,n.offsetHeight])})};O(o,()=>{n.innerText=o.val}),O([o,e,r,s,i],c),wt(t.par.layout.sizAbsChanged,c)}),R(l)},rn=t=>{const e=tn(Et({css:{"font-size":0}})),n=t.map(t=>{const e=Ct(t.elem,{layout:{disablePos:!0},css:{display:"inline-block",position:"relative","vertical-align":"middle"}});return R(e,t.children)}),o=()=>{n.forEach(t=>{const e=t.elem,n=e.inst;if(n){const t=n.dom;setTimeout(()=>{e.layout.pos.val=[U(t.offsetLeft),U(t.offsetTop)]},0)}})};O(n.map(t=>t.elem.layout.siz),o),wt(e.layout.sizAbsChanged,o);return R(e,n)},sn=t=>{const e=Xe(Et({css:{"font-size":0,"white-space":"nowrap"}})),n=t.map(t=>{const e=Ct(t.elem,{layout:{disablePos:!0},css:{display:"inline-block",position:"relative","vertical-align":"middle"}});return R(e,t.children)}),o=()=>{n.forEach(t=>{const e=t.elem,n=e.inst;if(n){const t=n.dom;setTimeout(()=>{e.layout.pos.val=[U(t.offsetLeft),U(t.offsetTop)]},0)}})};O(n.map(t=>t.elem.layout.siz),n.map(t=>t.elem.layout.pos),o),wt(e.layout.sizAbsChanged,o);return R(e,n)},an=(t,e)=>{const n=on(t),o=sn([n]),r=n.elem.text,s=r.size,i=(t=>{const{family:e,content:n}=t;return O(e,n,(t,e)=>{const n=document.createElement("div");n.style.visibility="hidden",n.style.width="max-content",n.style["font-size"]="16px",t&&(n.style["font-family"]=t),n.innerText=e,document.body.appendChild(n);const o=n.offsetWidth,r=n.offsetHeight;return n.remove(),[o,r]})})(r),a=Ce(i,R(e.elem,o));return O(o.elem.layout.sizAbs,([t])=>{o.elem.layout.pos.val=[Z(.5,X(100,U(-1*t))),0]}),O(e.elem.layout.sizAbs,i,([t],[e])=>{if(t>0){const o=(n=t/e*16,Math.round(1e3*(n+Number.EPSILON))/1e3);s.val=o+"px"}var n}),a},ln=t=>{const e=T(t),n=document.createElement("img"),o=vt(),r=kt({layout:{pos:[0,0],siz:[100,100]},css:{overflow:"-moz-hidden-unscrollable"},data:jt(ln,{siz:o,dom:n})});return r.withDOM(t=>{O(e,e=>{n.setAttribute("src",e),n.style.width="auto",n.style.height="auto",n.addEventListener("load",()=>{const t=it([n.offsetWidth,n.offsetHeight]);o.put=t,n.style.width="100%",n.style.height="100%"}),t.appendChild(n)})}),R(r)},cn=t=>{const e=ln(t),[{siz:n}]=e.elem.data.get(ln),o=m();return wt(n,t=>{o.val=[t[0].px,t[1].px]}),Ce(o,e)};export{De as EXPONENTIAL,D as Entry,We as FLIP,ln as Img,Ne as LINEAR,Pe as QUADRATIC,Et as Rect,Wt as RectT,kt as Supp,Ht as SuppT,L as T,on as Text,R as Tree,Te as _border,ke as _container,P as _mapT,Y as _pathT,je as _proportional,nn as _style,I as _walkT,K as addChans,tt as addCoord,Ft as addLayoutTriggers,X as addLen,pt as addNodes,G as addStyle,C as addSubNode,y as applyF,it as asPx,Me as border,vt as chan,Vt as cond,It as condElse,Se as container,dt as coord,at as copyCoord,lt as copyLen,$t as core,Gt as defaultLayoutReactivity,cn as fitImg,an as fitText,Xe as flex,Ze as flexX,tn as flexY,B as fromStruc,nt as getPx,ot as getRel,Fe as hashNode,Je as horizontal,Ue as horizontalSpace,jt as keyed,Q as len,sn as line,wt as listen,zt as listenOnce,gt as listenRef,N as mapT,et as mulCoord,Z as mulLen,m as node,j as nodeObj,rn as paragraph,$ as pathT,Ct as preserveR,Ce as proportional,U as px,Rt as removeEvents,_t as removeListen,Oe as removeRect,M as removeTran,ye as run,me as runDOM,we as runRect,_e as runRectDOM,Be as scrollbar,Ke as space,st as splitCoord,Ve as stopTimed,en as style,k as subNode,S as subNode1,Yt as supp,Le as switcher,He as timed,rt as toLen,T as toNode,q as toStruc,Bt as top,O as tran,E as tranRef,qt as tree,x as unsafeTran,A as unsafeTranRef,Ge as vertical,Qe as verticalSpace,V as walkT,ct as x,ut as y};
